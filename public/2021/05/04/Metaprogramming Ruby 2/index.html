<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ã€ŠRubyå…ƒç¼–ç¨‹ã€‹ | Longbiu</title><meta name="keywords" content="ä¹¦ç±"><meta name="author" content="Longbiu"><meta name="copyright" content="Longbiu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="å…ƒè¿™ä¸ªå­—çœ¼å¯¹è±¡æ¨¡å‹Rubyçš„ä¸–ç•Œé™¤äº†å¯¹è±¡ï¼Œè¿˜æœ‰å…¶ä»–çš„è¯­è¨€æ„ä»¶ï¼Œæ¯”å¦‚classï¼Œmoduleï¼Œinstance variableç­‰ï¼Œå…ƒç¼–ç¨‹æ“ä½œçš„å°±æ˜¯è¿™äº›è¯­è¨€æ„ä»¶ã€‚ æ‰€æœ‰è¿™äº›è¯­è¨€æ„ä»¶å­˜åœ¨çš„ç³»ç»Ÿç§°ä¹‹ä¸ºå¯¹è±¡æ¨¡å‹ã€‚ æ‰“å¼€ç±»2.7.2 :011 &gt; def to_alphanumeric(s)2.7.2 :012 &gt;   s.gsub(&#x2F;[^\w\s]&#x2F;,&amp;#x27;&amp;#x27;)2.7.2 :0">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€ŠRubyå…ƒç¼–ç¨‹ã€‹">
<meta property="og:url" content="http://www.jiangnanshaojiu.com/2021/05/04/Metaprogramming%20Ruby%202/index.html">
<meta property="og:site_name" content="Longbiu">
<meta property="og:description" content="å…ƒè¿™ä¸ªå­—çœ¼å¯¹è±¡æ¨¡å‹Rubyçš„ä¸–ç•Œé™¤äº†å¯¹è±¡ï¼Œè¿˜æœ‰å…¶ä»–çš„è¯­è¨€æ„ä»¶ï¼Œæ¯”å¦‚classï¼Œmoduleï¼Œinstance variableç­‰ï¼Œå…ƒç¼–ç¨‹æ“ä½œçš„å°±æ˜¯è¿™äº›è¯­è¨€æ„ä»¶ã€‚ æ‰€æœ‰è¿™äº›è¯­è¨€æ„ä»¶å­˜åœ¨çš„ç³»ç»Ÿç§°ä¹‹ä¸ºå¯¹è±¡æ¨¡å‹ã€‚ æ‰“å¼€ç±»2.7.2 :011 &gt; def to_alphanumeric(s)2.7.2 :012 &gt;   s.gsub(&#x2F;[^\w\s]&#x2F;,&amp;#x27;&amp;#x27;)2.7.2 :0">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.jiangnanshaojiu.com/img/ruby.png">
<meta property="article:published_time" content="2021-05-03T23:03:32.000Z">
<meta property="article:modified_time" content="2021-05-23T07:05:06.647Z">
<meta property="article:author" content="Longbiu">
<meta property="article:tag" content="ä¹¦ç±">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.jiangnanshaojiu.com/img/ruby.png"><link rel="shortcut icon" href="https://avatars.githubusercontent.com/u/48550717?v=4"><link rel="canonical" href="http://www.jiangnanshaojiu.com/2021/05/04/Metaprogramming%20Ruby%202/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":50,"languages":{"author":"ä½œè€…: Longbiu","link":"é“¾æ¥: ","source":"æ¥æº: Longbiu","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ã€ŠRubyå…ƒç¼–ç¨‹ã€‹',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-05-23 15:05:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="/css/iconfont.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://avatars.githubusercontent.com/u/48550717?v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">17</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">5</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/2021/05/01/hello-world/"><i class="fa-fw fa fa-plane"></i><span> Hello-World</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> å½’çº³</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ€»è§ˆ</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºæˆ‘</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/ruby.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Longbiu</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/2021/05/01/hello-world/"><i class="fa-fw fa fa-plane"></i><span> Hello-World</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> å½’çº³</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ€»è§ˆ</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºæˆ‘</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">ã€ŠRubyå…ƒç¼–ç¨‹ã€‹</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2021-05-03T23:03:32.000Z" title="å‘è¡¨äº 2021-05-04 07:03:32">2021-05-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2021-05-23T07:05:06.647Z" title="æ›´æ–°äº 2021-05-23 15:05:06">2021-05-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ruby/">ruby</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">7.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>31åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="ã€ŠRubyå…ƒç¼–ç¨‹ã€‹"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="å…ƒè¿™ä¸ªå­—çœ¼"><a href="#å…ƒè¿™ä¸ªå­—çœ¼" class="headerlink" title="å…ƒè¿™ä¸ªå­—çœ¼"></a>å…ƒè¿™ä¸ªå­—çœ¼</h1><h1 id="å¯¹è±¡æ¨¡å‹"><a href="#å¯¹è±¡æ¨¡å‹" class="headerlink" title="å¯¹è±¡æ¨¡å‹"></a>å¯¹è±¡æ¨¡å‹</h1><p>Rubyçš„ä¸–ç•Œé™¤äº†å¯¹è±¡ï¼Œè¿˜æœ‰å…¶ä»–çš„è¯­è¨€æ„ä»¶ï¼Œæ¯”å¦‚classï¼Œmoduleï¼Œinstance variableç­‰ï¼Œå…ƒç¼–ç¨‹æ“ä½œçš„å°±æ˜¯è¿™äº›è¯­è¨€æ„ä»¶ã€‚</p>
<p>æ‰€æœ‰è¿™äº›è¯­è¨€æ„ä»¶å­˜åœ¨çš„ç³»ç»Ÿç§°ä¹‹ä¸ºå¯¹è±¡æ¨¡å‹ã€‚</p>
<h2 id="æ‰“å¼€ç±»"><a href="#æ‰“å¼€ç±»" class="headerlink" title="æ‰“å¼€ç±»"></a>æ‰“å¼€ç±»</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :011 &gt; def to_alphanumeric(s)</span><br><span class="line">2.7.2 :012 &gt;   s.gsub(/[^\w\s]/,&#x27;&#x27;)</span><br><span class="line">2.7.2 :013 &gt; end</span><br><span class="line"> =&gt; :to_alphanumeric </span><br><span class="line">2.7.2 :014 &gt; to_alphanumeric(&quot;hello, %% world&quot;)</span><br><span class="line"> =&gt; &quot;hello  world&quot; </span><br></pre></td></tr></table></figure>

<p><strong>æ›´å¥½çš„æ–¹æ³•æ˜¯è®©å­—ç¬¦ä¸²æœ¬èº«æ¥åšè¿™ç§è½¬æ¢</strong></p>
<p><strong>å¯ä»¥å»Stringç±»æ¤å…¥to_alphanumericæ–¹æ³•</strong></p>
<h3 id="ç±»å®šä¹‰æ­ç§˜"><a href="#ç±»å®šä¹‰æ­ç§˜" class="headerlink" title="ç±»å®šä¹‰æ­ç§˜"></a>ç±»å®šä¹‰æ­ç§˜</h3><p>Rubyä¸­ï¼Œå®šä¹‰ç±»çš„è¯­å¥å’Œå…¶ä»–è¯­å¥æ²¡æœ‰æœ¬è´¨åŒºåˆ«</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :015 &gt; 3.times do</span><br><span class="line">2.7.2 :016 &gt;   class C</span><br><span class="line">2.7.2 :017 &gt;     puts &quot;Hello Longbiu&quot;</span><br><span class="line">2.7.2 :018 &gt;   end</span><br><span class="line">2.7.2 :019 &gt; end</span><br><span class="line">Hello Longbiu</span><br><span class="line">Hello Longbiu</span><br><span class="line">Hello Longbiu</span><br><span class="line"> =&gt; 3 </span><br></pre></td></tr></table></figure>

<p>Rubyçš„classå…³é”®å­—æ›´åƒæ˜¯ä¸€ä¸ªä½œç”¨åŸŸæ“ä½œç¬¦ï¼Œè€Œä¸æ˜¯ç±»å‹å£°æ˜è¯­å¥ã€‚classå…³é”®å­—çš„æ ¸å¿ƒä»»åŠ¡æ˜¯æŠŠä½ å¸¦åˆ°ç±»çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè®©ä½ å¯ä»¥åœ¨é‡Œé¢å®šä¹‰æ–¹æ³•ã€‚</p>
<p><strong>é‡æ–°æ‰“å¼€å·²ç»å­˜åœ¨çš„ç±»å¹¶å¯¹ä¹‹è¿›è¡ŒåŠ¨æ€ä¿®æ”¹â€”â€”æ‰“å¼€ç±»ï¼ˆopen classï¼‰</strong></p>
<h3 id="æ‰“å¼€ç±»çš„é—®é¢˜"><a href="#æ‰“å¼€ç±»çš„é—®é¢˜" class="headerlink" title="æ‰“å¼€ç±»çš„é—®é¢˜"></a>æ‰“å¼€ç±»çš„é—®é¢˜</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :005 &gt; [].methods.grep /^re/</span><br><span class="line"> =&gt; [:reject!, :repeated_permutation, :repeated_combination, :reject, :reverse_each, :replace, :reverse, :reverse!, :reduce, :remove_instance_variable, :respond_to?] </span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•åå†²çªæ—¶å¯èƒ½ä¼šå‡ºç°bugï¼Œè¿™ç§ç²—æš´çš„ä¿®æ”¹ç±»çš„æ–¹æ³•ä¹Ÿå«åšâ€”â€”<strong>çŒ´å­è¡¥ä¸(Monkeypatch)</strong></p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæ·»åŠ æ–°æ–¹æ³•æ¯”ä¿®æ”¹å·²æœ‰çš„æ–¹æ³•å®‰å…¨ã€‚</p>
<h2 id="ç±»çš„çœŸç›¸"><a href="#ç±»çš„çœŸç›¸" class="headerlink" title="ç±»çš„çœŸç›¸"></a>ç±»çš„çœŸç›¸</h2><h3 id="å¯¹è±¡ä¸­æœ‰ä»€ä¹ˆ"><a href="#å¯¹è±¡ä¸­æœ‰ä»€ä¹ˆ" class="headerlink" title="å¯¹è±¡ä¸­æœ‰ä»€ä¹ˆ"></a>å¯¹è±¡ä¸­æœ‰ä»€ä¹ˆ</h3><p><img src="/img/Metaprogramming/image-20210521101716315.png" alt="image-20210521101716315"></p>
<p>å‡å¦‚è¯´ï¼Œmy_method()æ˜¯MyClassçš„ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œè¿™å°±æ„å‘³ç€è¿™ä¸ªæ–¹æ³•å®šä¹‰åœ¨MyClassä¸­ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ªMyClassçš„å®ä¾‹æ‰èƒ½è°ƒç”¨å®ƒã€‚</p>
<p>åŒä¸€ä¸ªç±»çš„å¯¹è±¡å…±äº«åŒæ ·çš„æ–¹æ³•ï¼Œä½†ä¸å…±äº«å®ä¾‹å˜é‡ã€‚</p>
<h3 id="ç±»çš„çœŸç›¸-1"><a href="#ç±»çš„çœŸç›¸-1" class="headerlink" title="ç±»çš„çœŸç›¸"></a>ç±»çš„çœŸç›¸</h3><p>ç±»æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ã€‚</p>
<p>å…¶ä»–è¯­è¨€åªå…è®¸ä½ è¯»å–ç±»çš„ç›¸å…³ä¿¡æ¯ï¼Œè€ŒRubyå…è®¸ä½ åœ¨è¿è¡Œæ—¶ä¿®æ”¹è¿™äº›ä¿¡æ¯ã€‚</p>
<p><strong>Rubyçš„ç±»ç»§æ‰¿è‡ªå®ƒçš„è¶…ç±»</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :006 &gt; Array.superclass</span><br><span class="line"> =&gt; Object </span><br><span class="line">2.7.2 :007 &gt; Object.superclass</span><br><span class="line"> =&gt; BasicObject </span><br><span class="line">2.7.2 :008 &gt; BasicObject.superclass</span><br><span class="line"> =&gt; nil </span><br><span class="line">2.7.2 :009 &gt; Class.superclass</span><br><span class="line"> =&gt; Module </span><br></pre></td></tr></table></figure>

<p>Rubyä¸­ï¼Œç±»ä¸æ¨¡å—è¿™ä¸¤ä¸ªæ¦‚å¿µååˆ†æ¥è¿‘ï¼Œä¿ç•™è¿™ä¸¤ä¸ªæ¦‚å¿µçš„ä¸»è¦åŸå› æ˜¯ä¸ºäº†è·å¾—ä»£ç çš„æ¸…æ™°æ€§ã€‚</p>
<p>æŠŠè‡ªå·±çš„ä»£ç includeåˆ°åˆ«çš„ä»£ç â€”â€”Module</p>
<p>å¸Œæœ›æŸæ®µä»£ç è¢«å®ä¾‹åŒ–æˆ–è¢«ç»§æ‰¿â€”â€”Class</p>
<p><img src="/img/Metaprogramming/image-20210521103307143.png" alt="image-20210521103307143"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :010 &gt; class MyClass;</span><br><span class="line">2.7.2 :011 &gt; end</span><br><span class="line"> =&gt; nil </span><br><span class="line">2.7.2 :012 &gt; obj1 = MyClass.new</span><br><span class="line"> =&gt; #&lt;MyClass:0x00007f8fa4353dc0&gt; </span><br><span class="line">2.7.2 :013 &gt; obj2=MyClass.new</span><br><span class="line"> =&gt; #&lt;MyClass:0x00007f8fa43f14d0&gt; </span><br><span class="line">2.7.2 :014 &gt; MyClass.superclass</span><br><span class="line"> =&gt; Object </span><br><span class="line">2.7.2 :016 &gt; Class.new(MyClass)</span><br><span class="line"> =&gt; #&lt;Class:0x00007f8fa42d7608&gt; </span><br><span class="line">2.7.2 :017 &gt; Class.new(MyClass).superclass</span><br><span class="line"> =&gt; MyClass </span><br></pre></td></tr></table></figure>

<h3 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h3><p>ä»»ä½•ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„å¼•ç”¨(åŒ…æ‹¬ç±»åå’Œæ¨¡å—å)éƒ½æ˜¯å¸¸é‡ã€‚</p>
<p>Rubyä¸­ï¼Œå¸¸é‡å’Œå˜é‡çš„åŒºåˆ«åœ¨äºå®ƒä»¬çš„scopeä¸åŒã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :018 &gt; module MyModule</span><br><span class="line">2.7.2 :019 &gt;   MyConstant = &quot;A&quot;</span><br><span class="line">2.7.2 :020 &gt;   class MyClass</span><br><span class="line">2.7.2 :021 &gt;     MyConstant = &quot;B&quot;</span><br><span class="line">2.7.2 :022 &gt;   end</span><br><span class="line">2.7.2 :023 &gt; end</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Moduleæ¥ç»„ç»‡å¸¸é‡</p>
<h3 id="å¯¹è±¡å’Œç±»çš„å°ç»“"><a href="#å¯¹è±¡å’Œç±»çš„å°ç»“" class="headerlink" title="å¯¹è±¡å’Œç±»çš„å°ç»“"></a>å¯¹è±¡å’Œç±»çš„å°ç»“</h3><table>
<thead>
<tr>
<th></th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>å¯¹è±¡</td>
<td>ä¸€ç»„å®ä¾‹å˜é‡+æŒ‡å‘å…¶ç±»çš„å¼•ç”¨</td>
</tr>
<tr>
<td>ç±»</td>
<td>ä¸€ä¸ªå¯¹è±¡+ä¸€ç»„å®ä¾‹æ–¹æ³•+å¯¹å…¶superclassçš„å¼•ç”¨</td>
</tr>
</tbody></table>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">module</span> <span class="title">Bookworm</span></span></span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">Text</span></span></span><br></pre></td></tr></table></figure>

<h2 id="ç¼ºå¤±çš„è¿æ¥çº¿"><a href="#ç¼ºå¤±çš„è¿æ¥çº¿" class="headerlink" title="ç¼ºå¤±çš„è¿æ¥çº¿"></a>ç¼ºå¤±çš„è¿æ¥çº¿</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :026 &gt; Object.class</span><br><span class="line"> =&gt; Class </span><br><span class="line">2.7.2 :027 &gt; Module.superclass</span><br><span class="line"> =&gt; Object </span><br><span class="line">2.7.2 :028 &gt; Class.class</span><br><span class="line"> =&gt; Class </span><br></pre></td></tr></table></figure>

<h2 id="è°ƒç”¨æ–¹æ³•æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"><a href="#è°ƒç”¨æ–¹æ³•æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="è°ƒç”¨æ–¹æ³•æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"></a>è°ƒç”¨æ–¹æ³•æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h2><ol>
<li><strong>æ–¹æ³•æŸ¥æ‰¾</strong></li>
<li><strong>æ‰§è¡Œæ–¹æ³•</strong></li>
</ol>
<h3 id="æ–¹æ³•æŸ¥æ‰¾"><a href="#æ–¹æ³•æŸ¥æ‰¾" class="headerlink" title="æ–¹æ³•æŸ¥æ‰¾"></a>æ–¹æ³•æŸ¥æ‰¾</h3><p>è°ƒç”¨ä¸€ä¸ªæ–¹æ³•å‰ï¼ŒRubyä¼šåœ¨å¯¹è±¡çš„ç±»ä¸­æŸ¥æ‰¾é‚£ä¸ªæ–¹æ³•</p>
<p><strong>ä¸¤ä¸ªæ¦‚å¿µï¼šreceiver+ancestors chain</strong></p>
<p>receiverå°±æ˜¯ä½ è°ƒç”¨æ–¹æ³•æ‰€åœ¨çš„å¯¹è±¡</p>
<p><strong>Rubyé¦–å…ˆåœ¨æ¥å—è€…çš„ç±»ä¸­æŸ¥æ‰¾ï¼Œç„¶åé¡ºç€ç¥–å…ˆé“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¿™ä¸ªæ–¹æ³•ä¸ºæ­¢</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :037 &gt; class MyClass</span><br><span class="line">2.7.2 :038 &gt;   def my_method;</span><br><span class="line">2.7.2 :039 &gt;     &#x27;my_method()&#x27;;</span><br><span class="line">2.7.2 :040 &gt;   end</span><br><span class="line">2.7.2 :041 &gt; end</span><br><span class="line"> =&gt; :my_method </span><br><span class="line">2.7.2 :042 &gt; class MySubclass &lt; MyClass</span><br><span class="line">2.7.2 :043 &gt; end</span><br><span class="line"> =&gt; nil </span><br><span class="line">2.7.2 :044 &gt; obj = MySubclass.new</span><br><span class="line"> =&gt; #&lt;MySubclass:0x00007f8fa44b33c8&gt; </span><br><span class="line">2.7.2 :045 &gt; obj.my_method()</span><br><span class="line"> =&gt; &quot;my_method()&quot; </span><br></pre></td></tr></table></figure>

<p><strong>â€œå‘å³ä¸€æ­¥ï¼Œå†å‘ä¸Šâ€â€”â€”å…ˆå‘å³ä¸€æ­¥æ¥åˆ°æ¥æ”¶è€…æ‰€åœ¨çš„ç±»ï¼Œç„¶åæ²¿ç€ç¥–å…ˆé“¾å‘ä¸ŠæŸ¥æ‰¾ã€‚</strong></p>
<p><strong>æ¨¡å—ä¸æ–¹æ³•æŸ¥æ‰¾</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :046 &gt; module M1</span><br><span class="line">2.7.2 :047 &gt;   def my_method</span><br><span class="line">2.7.2 :048 &gt;     &quot;M1#my_method()&quot;</span><br><span class="line">2.7.2 :049 &gt;   end</span><br><span class="line">2.7.2 :050 &gt; end</span><br><span class="line"> =&gt; :my_method </span><br><span class="line">2.7.2 :051 &gt; class C</span><br><span class="line">2.7.2 :052 &gt;   include M1</span><br><span class="line">2.7.2 :053 &gt; end</span><br><span class="line"> =&gt; C </span><br><span class="line">2.7.2 :054 &gt; class D &lt; C;</span><br><span class="line">2.7.2 :055 &gt; end</span><br><span class="line"> =&gt; nil </span><br><span class="line">2.7.2 :056 &gt; D.ancestors</span><br><span class="line"> =&gt; [D, C, M1, Object, JSON::Ext::Generator::GeneratorMethods::Object, Kernel, BasicObject] </span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨prependæ–¹æ³•ï¼Œå¯ä»¥æŠŠmoduleæ’å…¥ancestors chainä¸­åŒ…å«å®ƒçš„è¯¥ç±»çš„ä¸‹æ–¹ï¼Œè€Œä¸æ˜¯åƒincludeæ–¹æ³•é‚£æ ·æ’å…¥åˆ°ä¸Šæ–¹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :057 &gt; class C2</span><br><span class="line">2.7.2 :058 &gt;   prepend M1</span><br><span class="line">2.7.2 :059 &gt; end</span><br><span class="line"> =&gt; C2 </span><br><span class="line">2.7.2 :060 &gt; class D2 &lt; C2;</span><br><span class="line">2.7.2 :061 &gt; end</span><br><span class="line"> =&gt; nil </span><br><span class="line">2.7.2 :062 &gt; D2.ancestors</span><br><span class="line"> =&gt; [D2, M1, C2, Object, JSON::Ext::Generator::GeneratorMethods::Object, Kernel, BasicObject] </span><br></pre></td></tr></table></figure>

<p><strong>å¤šé‡åŒ…å«</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :063 &gt; module M1;</span><br><span class="line">2.7.2 :064 &gt; end</span><br><span class="line"> =&gt; nil </span><br><span class="line">2.7.2 :065 &gt; module M2</span><br><span class="line">2.7.2 :066 &gt;   include M1</span><br><span class="line">2.7.2 :067 &gt; end</span><br><span class="line"> =&gt; M2 </span><br><span class="line">2.7.2 :068 &gt; module M3</span><br><span class="line">2.7.2 :069 &gt;   prepend M1</span><br><span class="line">2.7.2 :070 &gt;   include M2</span><br><span class="line">2.7.2 :071 &gt; end</span><br><span class="line"> =&gt; M3 </span><br><span class="line">2.7.2 :072 &gt; M3.ancestors</span><br><span class="line"> =&gt; [M1, M3, M2] </span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¯¥moduleå·²ç»å­˜åœ¨äºç¥–å…ˆé“¾ä¸­ï¼Œé‚£ä¹ˆRubyä¼šæ‚„æ‚„å¿½ç•¥è¿™ä¸ªincludeæˆ–prependæŒ‡ä»¤ã€‚</p>
<p><strong>Kernelæ¨¡å—</strong></p>
<p>printæ–¹æ³•å…¶å®æ˜¯Kernelæ¨¡å—çš„ç§æœ‰å®ä¾‹æ–¹æ³•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :075 &gt; Kernel.private_instance_methods.grep(/^pr/)</span><br><span class="line"> =&gt; [:proc, :printf, :print] </span><br></pre></td></tr></table></figure>

<p>Objectç±»åŒ…å«äº†kernelæ¨¡å—ï¼Œæ‰€ä»¥æ— è®ºå“ªä¸ªå¯¹è±¡éƒ½å¯ä»¥éšæ„è°ƒç”¨Kernelæ¨¡å—çš„æ–¹æ³•ã€‚</p>
<p><strong>å†…æ ¸æ–¹æ³•</strong>â€”â€”ç»™Kernelæ¨¡å—å¢åŠ ä¸€ä¸ªæ–¹æ³•</p>
<h3 id="æ‰§è¡Œæ–¹æ³•"><a href="#æ‰§è¡Œæ–¹æ³•" class="headerlink" title="æ‰§è¡Œæ–¹æ³•"></a>æ‰§è¡Œæ–¹æ³•</h3><p>å½“å‰å¯¹è±¡ç”¨selfè¡¨ç¤ºï¼Œå› æ­¤å¯ä»¥ç”¨selfå…³é”®å­—æ¥å¯¹ä»–è¿›è¡Œè®¿é—®ã€‚ä»»ä½•æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªå¯¹è±¡èƒ½å……å½“å½“å‰å¯¹è±¡ï¼Œè€Œä¸”æ²¡æœ‰å“ªä¸ªå¯¹è±¡å¯ä»¥é•¿æœŸå……å½“æ­¤è§’è‰²ã€‚</p>
<p><strong>é¡¶å±‚ä¸Šä¸‹æ–‡â€”â€”top level context</strong></p>
<p>å¯¹è±¡mainæœ‰æ—¶è¢«ç§°ä¸ºé¡¶å±‚ä¸Šä¸‹æ–‡â€”-æ­¤æ—¶å¼€å‘è€…å¤„åœ¨å †æ ˆçš„é¡¶å±‚ï¼Œè¦æ²¡è¿˜æ²¡æœ‰è°ƒç”¨ä»»ä½•æ–¹æ³•ï¼Œè¦ä¹ˆè°ƒç”¨çš„æ–¹æ³•å·²ç»è¿”å›ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :079 &gt; self</span><br><span class="line"> =&gt; main </span><br><span class="line">2.7.2 :080 &gt; self.class</span><br><span class="line"> =&gt; Object </span><br></pre></td></tr></table></figure>

<p>åœ¨ç±»å’Œæ¨¡å—å®šä¹‰ä¹‹ä¸­ï¼Œselfçš„è§’è‰²ç”±è¿™ä¸ªç±»æˆ–è€…æ¨¡å—æœ¬èº«æ‹…ä»»ã€‚</p>
<h3 id="ç»†åŒ–"><a href="#ç»†åŒ–" class="headerlink" title="ç»†åŒ–"></a>ç»†åŒ–</h3><p>ç»†åŒ–è§£å†³çš„é—®é¢˜æ˜¯ï¼šè§£å†³ç ´åæ€§çš„çŒ´å­è¡¥ä¸</p>
<p><strong>ç»†åŒ–</strong>ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :081 &gt; module StringExtensions</span><br><span class="line">2.7.2 :082 &gt;   refine String do</span><br><span class="line">2.7.2 :083 &gt;     def to_alphanumeric</span><br><span class="line">2.7.2 :084 &gt;       gsub(/[^\w\s]/,&#x27;&#x27;)</span><br><span class="line">2.7.2 :085 &gt;     end</span><br><span class="line">2.7.2 :086 &gt;   end</span><br><span class="line">2.7.2 :087 &gt; end</span><br><span class="line"> =&gt; #&lt;refinement:String@StringExtensions&gt;</span><br></pre></td></tr></table></figure>

<p>ç»†åŒ–åœ¨é»˜è®¤æƒ…å†µä¸‹ä¸ç”Ÿæ•ˆï¼Œä¸ºäº†ä½¿ç»†åŒ–ç”Ÿæ•ˆï¼Œå¿…é¡»è°ƒç”¨usingæ–¹æ³•ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :081 &gt; module StringExtensions</span><br><span class="line">2.7.2 :082 &gt;   refine String do</span><br><span class="line">2.7.2 :083 &gt;     def to_alphanumeric</span><br><span class="line">2.7.2 :084 &gt;       gsub(/[^\w\s]/,&#x27;&#x27;)</span><br><span class="line">2.7.2 :085 &gt;     end</span><br><span class="line">2.7.2 :086 &gt;   end</span><br><span class="line">2.7.2 :087 &gt; end</span><br><span class="line"> =&gt; #&lt;refinement:String@StringExtensions&gt; </span><br><span class="line">2.7.2 :088 &gt; module StringStuff</span><br><span class="line">2.7.2 :089 &gt;   using StringExtensions</span><br><span class="line">2.7.2 :090 &gt;   &quot;my_string..&quot;.to_alphanumeric</span><br><span class="line">2.7.2 :091 &gt; end</span><br><span class="line"> =&gt; &quot;my_string&quot; </span><br><span class="line">2.7.2 :092 &gt; &quot;my_string...##&quot;.to_alphanumeric</span><br><span class="line">Traceback (most recent call last):</span><br></pre></td></tr></table></figure>

<p>ç»†åŒ–åªåœ¨ä¸¤ç§åœºåˆæœ‰æ•ˆï¼šrefineä»£ç å†…éƒ¨ï¼Œä»usingè¯­å¥çš„ä½ç½®å¼€å§‹åˆ°æ¨¡å—ç»“æŸã€‚</p>
<p>ç»†åŒ–å¹¶éå…¨å±€æ€§çš„ï¼Œæ‰€ä»¥å®ƒä¸ä¼šå¸¦æ¥ç±»æ‰€å…·æœ‰çš„é—®é¢˜ï¼Œå¯ä»¥è®©ç»†åŒ–åªä½œç”¨åœ¨ä½ å¸Œæœ›ç”Ÿæ•ˆçš„åœ°æ–¹ã€‚</p>
<h2 id="æ··ä¹±çš„æ¨¡å—"><a href="#æ··ä¹±çš„æ¨¡å—" class="headerlink" title="æ··ä¹±çš„æ¨¡å—"></a>æ··ä¹±çš„æ¨¡å—</h2><h2 id="å¯¹è±¡æ¨¡å‹å°ç»“"><a href="#å¯¹è±¡æ¨¡å‹å°ç»“" class="headerlink" title="å¯¹è±¡æ¨¡å‹å°ç»“"></a>å¯¹è±¡æ¨¡å‹å°ç»“</h2><ul>
<li>å¯¹è±¡ç”±ä¸€ç»„å®ä¾‹å˜é‡å’Œç±»çš„å¼•ç”¨ç»„æˆã€‚</li>
<li>å¯¹è±¡çš„æ–¹æ³•å­˜åœ¨äºå¯¹è±¡æ‰€å±çš„ç±»ä¸­ï¼ˆå¯¹ç±»æ¥è¯´æ˜¯å®ä¾‹æ–¹æ³•ï¼‰ã€‚ç±»æœ¬èº«æ˜¯Classç±»çš„å¯¹è±¡ã€‚ç±»çš„åå­—åªæ˜¯ä¸€ä¸ªå¸¸é‡ã€‚</li>
<li>Classç±»æ˜¯Moduleçš„å­ç±»ã€‚ä¸€ä¸ªæ¨¡å—åŸºæœ¬ä¸Šå°±æ˜¯ç”±ä¸€ç»„æ–¹æ³•ç»„æˆçš„åŒ…ã€‚ç±»é™¤äº†å…·æœ‰æ¨¡å—çš„ç‰¹æ€§ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è¢«å®ä¾‹åŒ–ï¼ˆä½¿ç”¨newæ–¹æ³•ï¼‰ ï¼Œæˆ–è€…æŒ‰ä¸€å®šçš„å±‚æ¬¡ç»“æ„æ¥ç»„ç»‡ï¼ˆä½¿ç”¨superclassæ–¹æ³•ï¼‰ã€‚</li>
<li>å¸¸é‡åƒæ–‡ä»¶ç³»ç»Ÿä¸€æ ·ï¼Œæ˜¯æŒ‰ç…§æ ‘å½¢ç»“æ„ç»„ç»‡çš„ã€‚å…¶ä¸­ï¼Œæ¨¡å—å’Œç±»çš„åå­—æ‰®æ¼”ç›®å½•çš„è§’è‰²ï¼Œå…¶ä»–æ™®é€šçš„å¸¸é‡åˆ™æ‰®æ¼”æ–‡ä»¶çš„è§’è‰²ã€‚</li>
<li>æ¯ä¸ªç±»éƒ½æœ‰ä¸€ä¸ªç¥–å…ˆé“¾ï¼Œè¿™ä¸ªé“¾ä»æ¯ä¸ªç±»è‡ªå·±å¼€å§‹ï¼Œå‘ä¸Šç›´åˆ°Basicobjectç»“æŸã€‚</li>
<li>è°ƒç”¨æ–¹æ³•æ—¶ï¼Œ Rubyé¦–å…ˆå‘å³æ‰¾åˆ°æ¥æ”¶è€…æ‰€å±çš„ç±»ï¼Œç„¶åå‘ä¸ŠæŸ¥æ‰¾ç¥–å…ˆé“¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥æ–¹æ³•æˆ–åˆ°è¾¾é“¾çš„é¡¶ç«¯ä¸ºæ­¢ã€‚</li>
<li>åœ¨ç±»ä¸­åŒ…å«ä¸€ä¸ªæ¨¡å—ï¼ˆä½¿ç”¨includeæ–¹æ³•ï¼‰æ—¶ï¼Œè¿™ä¸ªæ¨¡å—ä¼šè¢«æ’å…¥ç¥–å…ˆé“¾ä¸­ï¼Œä½ç½®å°±åœ¨ç±»çš„æ­£ä¸Šæ–¹ï¼›è€Œä½¿ç”¨prependæ–¹æ³•åŒ…å«ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œè¿™ä¸ªæ¨¡å—ä¹Ÿä¼šè¢«æ’å…¥ç¥–å…ˆé“¾ä¸­ï¼Œä½ç½®åœ¨ç±»çš„æ­£ä¸‹æ–¹ã€‚</li>
<li>è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œæ¥æ”¶è€…ä¼šæ‰®æ¼”selfçš„è§’è‰²ã€‚</li>
<li>å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼ˆæˆ–ç±»ï¼‰æ—¶ï¼Œè¯¥æ¨¡å—ä¼šæ‰®æ¼”selfçš„è§’è‰²ã€‚å®ä¾‹å˜é‡æ°¸è¿œè¢«è®¤å®šä¸ºselfçš„å®ä¾‹å˜é‡ã€‚</li>
<li>ä»»ä½•æ²¡æœ‰æ˜ç¡®æŒ‡å®šæ¥æ”¶è€…çš„æ–¹æ³•è°ƒç”¨ï¼Œéƒ½å½“åšæ˜¯è°ƒç”¨selfçš„æ–¹æ³•ã€‚</li>
<li>ç»†åŒ–å°±åƒåœ¨åŸæ¥çš„ç±»ä¸Šæ·»åŠ äº†ä¸€å—è¡¥ä¸ï¼Œè€Œä¸”å®ƒä¼šè¦†ç›–æ­£å¸¸çš„æ–¹æ³•æŸ¥æ‰¾ã€‚æ­¤å¤–ï¼Œç»†åŒ–åªåœ¨ç¨‹åºçš„éƒ¨åˆ†åŒºåŸŸç”Ÿæ•ˆï¼šä»usingè¯­å¥çš„ä½ç½®å¼€å§‹ï¼Œç›´åˆ°æ¨¡å—ç»“æŸï¼Œæˆ–è€…ç›´åˆ°æ–‡ä»¶ç»“æŸã€‚</li>
</ul>
<h1 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h1><p><strong>static type checking</strong></p>
<p>Javaâ€”â€”Javaçš„ç¼–è¯‘å™¨ä¼šæ§åˆ¶ä»£ç ä¹‹é—´çš„äº¤è°ˆï¼Œå¯¹äºæ¯ä¸€æ¬¡æ–¹æ³•çš„è°ƒç”¨ï¼Œç¼–è¯‘å™¨éƒ½ä¼šæ£€æŸ¥æ¥å—å¯¹è±¡æ˜¯å¦æœ‰ä¸€ä¸ªåŒ¹é…çš„æ–¹æ³•ï¼Œè¿™å°±å«åšâ€”â€”<strong>é™æ€ç±»å‹æ£€æŸ¥</strong></p>
<p>æ‰€ä»¥Javaä¹Ÿå«åšé™æ€è¯­è¨€</p>
<p><strong>åŠ¨æ€è¯­è¨€åŒ…æ‹¬Python&amp;Ruby</strong></p>
<p>åœ¨æŸä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ç‰¹å®šçš„æ–¹æ³•æ—¶ï¼Œç³»ç»Ÿä¸ä¼šå‘å‡ºè­¦å‘Šï¼Œç›´åˆ°çœŸæ­£çš„è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œæ‰ä¼šæç¤ºæ— æ³•å“åº”è°ƒç”¨ã€‚</p>
<h2 id="ä»£ç ç¹å¤çš„é—®é¢˜"><a href="#ä»£ç ç¹å¤çš„é—®é¢˜" class="headerlink" title="ä»£ç ç¹å¤çš„é—®é¢˜"></a>ä»£ç ç¹å¤çš„é—®é¢˜</h2><h3 id="è€ç³»ç»Ÿ"><a href="#è€ç³»ç»Ÿ" class="headerlink" title="è€ç³»ç»Ÿ"></a>è€ç³»ç»Ÿ</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">DSç±»ä¸‹é¢æœ‰å¾ˆå¤šå¾ˆå¤šæ–¹æ³•ï¼éƒ½æ˜¯æ‹¿å–å¯¹åº”ä¿¡æ¯çš„ï¼Œçœ‹èµ·æ¥å°±å¾ˆç¹å¤çš„æ ·å­ï¼</span><br></pre></td></tr></table></figure>

<h3 id="ä»£ç çš„ä¼˜é›…åŒ–ğŸ¶"><a href="#ä»£ç çš„ä¼˜é›…åŒ–ğŸ¶" class="headerlink" title="ä»£ç çš„ä¼˜é›…åŒ–ğŸ¶"></a>ä»£ç çš„ä¼˜é›…åŒ–ğŸ¶</h3><p><strong>åŠ¨æ€æ–¹æ³•</strong></p>
<p><strong>method missing</strong></p>
<h2 id="åŠ¨æ€æ–¹æ³•"><a href="#åŠ¨æ€æ–¹æ³•" class="headerlink" title="åŠ¨æ€æ–¹æ³•"></a>åŠ¨æ€æ–¹æ³•</h2><p>è°ƒç”¨ä¸€ä¸ªæ–¹æ³•â€”â€”ç»™ä¸€ä¸ªå¯¹è±¡å‘é€ä¸€ä¸ªæ¶ˆæ¯</p>
<h3 id="åŠ¨æ€è°ƒç”¨æ–¹æ³•"><a href="#åŠ¨æ€è°ƒç”¨æ–¹æ³•" class="headerlink" title="åŠ¨æ€è°ƒç”¨æ–¹æ³•"></a>åŠ¨æ€è°ƒç”¨æ–¹æ³•</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="meta">2.7.2 :008 &gt;</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="meta">2.7.2 :009 &gt;</span>   <span class="function"><span class="keyword">def</span> <span class="title">my_method</span><span class="params">(my_arg)</span></span></span><br><span class="line"><span class="meta">2.7.2 :010 &gt;</span>     my_arg * <span class="number">2</span></span><br><span class="line"><span class="meta">2.7.2 :011 &gt;</span>   end</span><br><span class="line"><span class="meta">2.7.2 :012 &gt;</span> end</span><br><span class="line"> =&gt; <span class="symbol">:my_method</span> </span><br><span class="line"><span class="meta">2.7.2 :013 &gt;</span> obj = MyClass</span><br><span class="line"> =&gt; MyClass </span><br><span class="line"><span class="meta">2.7.2 :014 &gt;</span> obj = MyClass.new</span><br><span class="line"> =&gt; #&lt;MyClass:0x00007f8d721c8cc8&gt; </span><br><span class="line"><span class="meta">2.7.2 :015 &gt;</span> obj.send(<span class="symbol">:my_method</span>,<span class="number">3</span>)</span><br><span class="line"> =&gt; <span class="number">6</span> </span><br><span class="line"><span class="meta">2.7.2 :016 &gt;</span> obj.my_method(<span class="number">3</span>)</span><br><span class="line"> =&gt; <span class="number">6</span> </span><br></pre></td></tr></table></figure>

<p><strong>sendæ–¹æ³•é‡Œæ‰€è°ƒç”¨çš„æ–¹æ³•æˆä¸ºäº†å‚æ•°</strong></p>
<p><strong>Symbol</strong>æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œ&amp;ï¼Œç‰¹åˆ«é€‚åˆç”¨æ¥è¡¨ç¤ºæ–¹æ³•åã€‚</p>
<h3 id="åŠ¨æ€å®šä¹‰æ–¹æ³•"><a href="#åŠ¨æ€å®šä¹‰æ–¹æ³•" class="headerlink" title="åŠ¨æ€å®šä¹‰æ–¹æ³•"></a>åŠ¨æ€å®šä¹‰æ–¹æ³•</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="meta">2.7.2 :001 &gt;</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="meta">2.7.2 :002 &gt;</span>   define_method <span class="symbol">:my_method</span> do <span class="params">| my_arg|</span></span><br><span class="line"><span class="meta">2.7.2 :003 &gt;</span>   	my_arg*<span class="number">3</span></span><br><span class="line"><span class="meta">2.7.2 :004 &gt;</span>   end</span><br><span class="line"><span class="meta">2.7.2 :005 &gt;</span> end</span><br><span class="line"> =&gt; <span class="symbol">:my_method</span> </span><br><span class="line"><span class="meta">2.7.2 :006 &gt;</span> obj = MyClass.new</span><br><span class="line"> =&gt; #&lt;MyClass:0x00007f8d6f67a990&gt; </span><br><span class="line"><span class="meta">2.7.2 :007 &gt;</span> obj.my_method(<span class="number">2</span>)</span><br><span class="line"> =&gt; <span class="number">6</span> </span><br></pre></td></tr></table></figure>

<p>è¿™ç§åœ¨è¿è¡Œæ—¶å®šä¹‰æ–¹æ³•çš„æŠ€æœ¯ç§°ä¸ºåŠ¨æ€æ–¹æ³•â€”â€”<strong>Dynamic Method</strong></p>
<h3 id="é‡æ„Computerç±»"><a href="#é‡æ„Computerç±»" class="headerlink" title="é‡æ„Computerç±»"></a>é‡æ„Computerç±»</h3><p>æ ¸å¿ƒå°±æ˜¯æ¥æ”¶String || Symbol ä½œä¸ºå‚æ•°ï¼Œå¹¶è°ƒç”¨æ–¹æ³•ã€‚</p>
<h2 id="method-missingæ–¹æ³•"><a href="#method-missingæ–¹æ³•" class="headerlink" title="method_missingæ–¹æ³•"></a>method_missingæ–¹æ³•</h2><p>ä»€ä¹ˆæ˜¯åŠ¨æ€è¯­è¨€ï¼Œshow me the code</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="meta">2.7.2 :020 &gt;</span> <span class="class"><span class="keyword">class</span> <span class="title">Lawyer</span></span></span><br><span class="line"><span class="meta">2.7.2 :021 &gt;</span> end</span><br><span class="line"> =&gt; nil </span><br><span class="line"><span class="meta">2.7.2 :022 &gt;</span> nick = Lawyer.new</span><br><span class="line"> =&gt; #&lt;Lawyer:0x00007f8d6bce27f0&gt; </span><br><span class="line"><span class="meta">2.7.2 :023 &gt;</span> nick.talk_simple</span><br><span class="line">Traceback (most recent call last)<span class="symbol">:</span></span><br><span class="line">        <span class="number">1</span>: from (irb)<span class="symbol">:</span><span class="number">23</span></span><br><span class="line">NoMethodError (undefined method <span class="string">`talk_simple&#x27; for #&lt;Lawyer:0x00007f8d6bce27f0&gt;)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="meta">2.7.2 :025 &gt;</span> Lawyer.ancestors</span><br><span class="line"> =&gt; [Lawyer, ActiveSupport::Dependencies::ZeitwerkIntegration::RequireDependency, ActiveSupport::ForkTracker::CoreExtPrivate, ActiveSupport::ForkTracker::CoreExt, ActiveSupport::ToJsonWithActiveSupportEncoder, Object, JSON::Ext::Generator::GeneratorMethods::Object, ActiveSupport::Dependencies::Loadable, ActiveSupport::Tryable, Kernel, BasicObject] </span><br></pre></td></tr></table></figure>

<h3 id="è¦†å†™method-missingæ–¹æ³•"><a href="#è¦†å†™method-missingæ–¹æ³•" class="headerlink" title="è¦†å†™method_missingæ–¹æ³•"></a>è¦†å†™method_missingæ–¹æ³•</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="meta">2.7.2 :026 &gt;</span> <span class="class"><span class="keyword">class</span> <span class="title">Lawyer</span></span></span><br><span class="line"><span class="meta">2.7.2 :027 &gt;</span>   <span class="function"><span class="keyword">def</span> <span class="title">method_missing</span><span class="params">(method, *args)</span></span></span><br><span class="line"><span class="meta">2.7.2 :028 &gt;</span>     puts <span class="string">&quot;You called: <span class="subst">#&#123;method&#125;</span> (<span class="subst">#&#123;args.join(<span class="string">&#x27;,&#x27;</span>)&#125;</span>)&quot;</span></span><br><span class="line"><span class="meta">2.7.2 :029 &gt;</span>   end</span><br><span class="line"><span class="meta">2.7.2 :030 &gt;</span> end</span><br><span class="line"> =&gt; <span class="symbol">:method_missing</span> </span><br><span class="line"><span class="meta">2.7.2 :032 &gt;</span> lawyer = Lawyer.new</span><br><span class="line"> =&gt; #&lt;Lawyer:0x00007f8d6be08710&gt; </span><br><span class="line"><span class="meta">2.7.2 :034 &gt;</span> lawyer.send(<span class="symbol">:talk_simple</span>,<span class="number">2</span>)</span><br><span class="line">You <span class="symbol">called:</span> talk_simple (<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h3 id="å¹½çµæ–¹æ³•"><a href="#å¹½çµæ–¹æ³•" class="headerlink" title="å¹½çµæ–¹æ³•"></a>å¹½çµæ–¹æ³•</h3><p>å› ä¸ºè¦è°ƒç”¨çš„æ–¹æ³•å…¶å®ä¸å­˜åœ¨ï¼Œæ‰€ä»¥ä¹Ÿå«å®ƒå¹½çµæ–¹æ³•ã€‚</p>
<h2 id="æ¶ˆç­bug"><a href="#æ¶ˆç­bug" class="headerlink" title="æ¶ˆç­bug"></a>æ¶ˆç­bug</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :121 &gt; class Roulette</span><br><span class="line">2.7.2 :122 &gt;   def method_missing(name, *args)</span><br><span class="line">2.7.2 :123 &gt;     person = name.to_s.capitalize</span><br><span class="line">2.7.2 :124 &gt;     3.times do</span><br><span class="line">2.7.2 :125 &gt;       number = rand(10) + 1</span><br><span class="line">2.7.2 :126 &gt;       puts &quot;#&#123;number&#125;----&quot;</span><br><span class="line">2.7.2 :127 &gt;     end</span><br><span class="line">2.7.2 :128 &gt;     puts  &quot;#&#123;person&#125; got a #&#123;number&#125;&quot;</span><br><span class="line">2.7.2 :129 &gt;   end</span><br><span class="line">2.7.2 :130 &gt; end</span><br></pre></td></tr></table></figure>

<p><img src="/img/Metaprogramming/image-20210518225149082.png" alt="image-20210518225149082"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :156 &gt; class Roulette</span><br><span class="line">2.7.2 :157 &gt;   def method_missing(name, *args)</span><br><span class="line">2.7.2 :158 &gt;     person = name.to_s.capitalize</span><br><span class="line">2.7.2 :159 &gt;     super unless %w[Bob Tim Longbiu].include? p</span><br><span class="line">erson</span><br><span class="line">2.7.2 :160 &gt;     number = 0</span><br><span class="line">2.7.2 :161 &gt;     3.times do</span><br><span class="line">2.7.2 :162 &gt;       number = rand(10) +1</span><br><span class="line">2.7.2 :163 &gt;       puts &quot;#&#123;number&#125;---&quot;</span><br><span class="line">2.7.2 :164 &gt;     end</span><br><span class="line">2.7.2 :165 &gt;     &quot;#&#123;person&#125; got a #&#123;number&#125;&quot;</span><br><span class="line">2.7.2 :166 &gt;   end</span><br><span class="line">2.7.2 :167 &gt; end</span><br></pre></td></tr></table></figure>

<h2 id="ç™½æ¿ç±»"><a href="#ç™½æ¿ç±»" class="headerlink" title="ç™½æ¿ç±»"></a>ç™½æ¿ç±»</h2><p>è°ƒç”¨ç±»çš„æŸä¸ªæ–¹æ³•è¿”å›nilæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ¡è¯­å¥åˆ—å‡ºObjectä¸­æ‰€æœ‰ä»¥då¼€å¤´çš„å®ä¾‹æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Object.instance_methods.grep &#x2F;^d&#x2F;</span><br></pre></td></tr></table></figure>

<h3 id="BasicObject"><a href="#BasicObject" class="headerlink" title="BasicObject"></a>BasicObject</h3><p>ç»§æ‰¿BasicObjectç±»æ˜¯æœ€ç®€å•çš„å®šä¹‰ç™½æ¿ç±»çš„æ–¹æ³•ã€‚</p>
<h3 id="åˆ é™¤æ–¹æ³•"><a href="#åˆ é™¤æ–¹æ³•" class="headerlink" title="åˆ é™¤æ–¹æ³•"></a>åˆ é™¤æ–¹æ³•</h3><table>
<thead>
<tr>
<th>name</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>undef_method</td>
<td>åˆ é™¤æ‰€æœ‰ï¼ˆåŒ…æ‹¬ç»§æ‰¿æ¥çš„ï¼‰æ–¹æ³•</td>
</tr>
<tr>
<td>remove_method</td>
<td>ä»…åˆ é™¤æ¥å—è€…è‡ªå·±çš„æ–¹æ³•</td>
</tr>
</tbody></table>
<h3 id="ä¿®æ”¹Computer"><a href="#ä¿®æ”¹Computer" class="headerlink" title="ä¿®æ”¹Computer"></a>ä¿®æ”¹Computer</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Computer</span> &lt; BasicObject</span></span><br><span class="line">	â€¦â€¦</span><br></pre></td></tr></table></figure>

<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>å¹½çµæ–¹æ³•äº§ç”Ÿé£é™©çš„æ ¹æœ¬åŸå› æ˜¯å®ƒä»¬å¹¶éçœŸæ­£çš„æ–¹æ³•ï¼Œå®ƒä»¬åªæ˜¯å¯¹æ–¹æ³•è°ƒç”¨çš„æ‹¦æˆªã€‚</p>
<p>æœ‰åŠ¨æ€æ–¹æ³•åˆ™æ˜¯æ™®é€šçš„æ–¹æ³•ï¼Œä¸è¿‡å®ƒä»¬ä¸æ˜¯ç”¨defå®šä¹‰ï¼Œè€Œæ˜¯ç”¨define_methodå®šä¹‰ï¼Œå®ƒä»¬çš„è¡Œä¸ºè·Ÿå…¶ä»–æ–¹æ³•æ²¡ä»€ä¹ˆä¸¤æ ·ã€‚</p>
<h1 id="ä»£ç å—"><a href="#ä»£ç å—" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h1><p>å—å¯ä»¥ç”¨æ¥æ§åˆ¶<strong>ä½œç”¨åŸŸ(scope)</strong>,ä½œç”¨åŸŸæ˜¯å˜é‡å’Œæ–¹æ³•å¯ç”¨æ€§èŒƒå›´ã€‚</p>
<h2 id="å­¦ä¹ ä»£ç å—"><a href="#å­¦ä¹ ä»£ç å—" class="headerlink" title="å­¦ä¹ ä»£ç å—"></a>å­¦ä¹ ä»£ç å—</h2><h3 id="ä»£ç å—å­¦ä¹ è·¯çº¿"><a href="#ä»£ç å—å­¦ä¹ è·¯çº¿" class="headerlink" title="ä»£ç å—å­¦ä¹ è·¯çº¿"></a>ä»£ç å—å­¦ä¹ è·¯çº¿</h3><ul>
<li>ä»£ç å—çš„åŸºç¡€çŸ¥è¯†</li>
<li>ä½œç”¨åŸŸçš„åŸºç¡€çŸ¥è¯†ï¼šç”¨ä»£ç å—æºå¸¦å˜é‡ç©¿è¶Šä½œç”¨åŸŸ</li>
<li>é€šè¿‡ä¼ é€’å—ç»™instance_evalæ–¹æ³•æ¥æ§åˆ¶ä½œç”¨åŸŸ</li>
<li>æ€æ ·æŠŠå—è½¬æ¢ä¸ºè¯¸å¦‚Procå’Œlambdaè¿™æ ·çš„å¯è°ƒç”¨å¯¹è±¡ï¼Œä¾›ä»¥åè°ƒç”¨</li>
</ul>
<h3 id="ä»£ç å—åŸºç¡€çŸ¥è¯†"><a href="#ä»£ç å—åŸºç¡€çŸ¥è¯†" class="headerlink" title="ä»£ç å—åŸºç¡€çŸ¥è¯†"></a>ä»£ç å—åŸºç¡€çŸ¥è¯†</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a_method</span><span class="params">(a,b)</span></span></span><br><span class="line">	a+<span class="keyword">yield</span>(a,b)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :103 &gt; def a_method(a,b)</span><br><span class="line">2.7.2 :104 &gt;   a+yield(a,b)</span><br><span class="line">2.7.2 :105 &gt; end</span><br><span class="line"> =&gt; :a_method </span><br><span class="line">2.7.2 :106 &gt; a_method(1,2) &#123;|x,y| (x+y)*3&#125;</span><br><span class="line"> =&gt; 10 </span><br></pre></td></tr></table></figure>

<p>ä»£ç å—å¯ä»¥ç”¨å¤§æ‹¬å·å®šä¹‰ï¼Œä¹Ÿå¯ä»¥ç”¨doâ€¦â€¦endå…³é”®å­—å®šä¹‰ï¼Œé€šå¸¸æ¥è¯´ï¼Œåªæœ‰ä¸€è¡Œçš„å—ç”¨å¤§æ‹¬å·ï¼Œè€Œå¤šè¡Œçš„å—ç”¨doâ€¦â€¦endã€‚</p>
<p>åªæœ‰è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œæ‰å¯ä»¥å®šä¹‰ä¸€ä¸ªå—ã€‚å—ä¼šè¢«ç›´æ¥ä¼ é€’ç»™è¿™ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥ç”¨yieldå…³é”®å­—è°ƒç”¨è¿™ä¸ªå—ã€‚</p>
<p><strong>ä½¿ç”¨Kernel#block_given?æ–¹æ³•è¯¢é—®å½“å‰çš„æ–¹æ³•è°ƒç”¨æ˜¯å¦åŒ…å«å—</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :107 &gt; def a_method</span><br><span class="line">2.7.2 :108 &gt;   return yield if block_given?</span><br><span class="line">2.7.2 :109 &gt;   &#x27;no block&#x27;</span><br><span class="line">2.7.2 :110 &gt; end</span><br><span class="line"> =&gt; :a_method </span><br><span class="line">2.7.2 :111 &gt; a_method</span><br><span class="line"> =&gt; &quot;no block&quot; </span><br><span class="line">2.7.2 :112 &gt; a_method &#123; &quot;here is a block&quot; &#125;</span><br><span class="line"> =&gt; &quot;here is a block&quot; </span><br></pre></td></tr></table></figure>

<h2 id="Rubyçš„-ç¬¦å·"><a href="#Rubyçš„-ç¬¦å·" class="headerlink" title="Rubyçš„#ç¬¦å·"></a><del>Rubyçš„#ç¬¦å·</del></h2><h3 id="usingå…³é”®å­—"><a href="#usingå…³é”®å­—" class="headerlink" title="usingå…³é”®å­—"></a><del>usingå…³é”®å­—</del></h3><h2 id="ä»£ç å—æ˜¯é—­åŒ…"><a href="#ä»£ç å—æ˜¯é—­åŒ…" class="headerlink" title="ä»£ç å—æ˜¯é—­åŒ…"></a>ä»£ç å—æ˜¯é—­åŒ…</h2><p>ä»£ç å—è¿˜å¯ä»¥æŠŠå˜é‡å·å·å¸¦å‡ºåŸæ¥çš„ä½œç”¨åŸŸã€‚</p>
<p>ä»£ç å—ä¸èƒ½ç‹¬ç«‹çš„è¿è¡Œã€‚<img src="/img/Metaprogramming/screenshot-20210521-170353.png" alt="screenshot-20210521-170353"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :128 &gt; def my_method</span><br><span class="line">2.7.2 :129 &gt;   x = &quot;goodbye&quot;</span><br><span class="line">2.7.2 :130 &gt;   yield(&quot;cruel&quot;)</span><br><span class="line">2.7.2 :131 &gt; end</span><br><span class="line"> =&gt; :my_method </span><br><span class="line">2.7.2 :132 &gt; x = &quot;hello&quot;</span><br><span class="line"> =&gt; &quot;hello&quot; </span><br><span class="line">2.7.2 :133 &gt; my_method &#123; |y| &quot;#&#123;x&#125;, #&#123;y&#125; world&quot; &#125;</span><br><span class="line"> =&gt; &quot;hello, cruel world&quot; </span><br><span class="line">2.7.2 :134 &gt; my_method &#123; |x| &quot;#&#123;x&#125;, world&quot; &#125;</span><br><span class="line"> =&gt; &quot;cruel, world&quot; </span><br></pre></td></tr></table></figure>

<p>ç»‘å®šåœ¨ä»£ç å—é‡Œçš„å˜é‡åœ¨ä»£ç å—ç»“æŸä¹‹åï¼Œä¹Ÿè·Ÿç€ç»“æŸäº†ã€‚åŸºäºè¿™æ ·çš„ç‰¹æ€§ï¼Œä»£ç å—ä¹Ÿå«åšé—­åŒ…â€”â€”closureã€‚</p>
<h3 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h3><p><strong>æ­¤ä¹¦é‡Œä¸€æ®µå¾ˆé­”å¹»çš„è¯</strong></p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">è®¾æƒ³ä½ æ˜¯ä¸€ä¸ªå¾®å‹è°ƒè¯•å™¨ï¼ˆdebuggerï¼‰ ï¼Œæ­£æ²¿ç€ä»£ç ç©¿è¿‡ä¸€æ®µRubyç¨‹åºã€‚ä½ ä»ä¸€æ¡è¯­å¥è¹¦åˆ°å¦ä¸€æ¡è¯­å¥ï¼Œç›´åˆ°é‡åˆ°ä¸€ä¸ªæ–­ç‚¹ã€‚çœ‹çœ‹å‘¨å›´çš„ç¯å¢ƒï¼Œè¿™å°±æ˜¯ä½ çš„ä½œç”¨åŸŸã€‚</span><br><span class="line"></span><br><span class="line">ä½œç”¨åŸŸé‡Œåˆ°å¤„éƒ½æ˜¯ç»‘å®šã€‚ä½ çš„è„šä¸‹æœ‰ä¸€å †å±€éƒ¨å˜é‡ã€‚æŠ¬å¤´å‘ä¸Šçœ‹ï¼Œä½ ä¼šå‘ç°è‡ªå·±ç«™åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œï¼Œå®ƒæœ‰è‡ªå·±çš„æ–¹æ³•å’Œå®ä¾‹å˜é‡ã€‚è¿™ä¸ªå¯¹è±¡å°±æ˜¯å½“å‰å¯¹è±¡ï¼Œä¹Ÿç§°ä¸ºselfã€‚ä¸è¿œå¤„æœ‰ä¸€æ£µæŒ‚æ»¡å¸¸é‡çš„æ ‘ï¼Œä½ å¯ä»¥ç”¨å®ƒä»¬æ¥ç¡®å®šè‡ªå·±çš„ä½ç½®ã€‚æ›´è¿œçš„åœ°æ–¹ï¼Œè¿˜æœ‰ä¸€ç»„å…¨å±€å˜é‡ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>Rubyçš„ä½œç”¨åŸŸä¹‹é—´æ˜¯æˆªç„¶åˆ†å¼€çš„ï¼Œä¸€æ—¦è¿›å…¥ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼ŒåŸå…ˆçš„ç»‘å®šä¼šè¢«æ›¿æ¢æˆä¸€ç»„æ–°çš„ç»‘å®šã€‚</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :149 &gt; def a_scope</span><br><span class="line">2.7.2 :150 &gt;   $var = &quot;some value&quot;</span><br><span class="line">2.7.2 :151 &gt; end</span><br><span class="line"> =&gt; :a_scope </span><br><span class="line">2.7.2 :152 &gt; def another_scope</span><br><span class="line">2.7.2 :153 &gt;   $var</span><br><span class="line">2.7.2 :154 &gt; end</span><br><span class="line"> =&gt; :another_scope </span><br><span class="line">2.7.2 :155 &gt; a_scope</span><br><span class="line"> =&gt; &quot;some value&quot; </span><br><span class="line">2.7.2 :156 &gt; another_scope</span><br><span class="line"> =&gt; &quot;some value&quot; </span><br></pre></td></tr></table></figure>

<p>ä»»ä½•äººéƒ½å¯ä»¥ä¿®æ”¹å…¨å±€å˜é‡ï¼Œå¼€å‘è€…å‡ ä¹æ— æ³•ç¡®å®šæ˜¯è°ä¿®æ”¹äº†å®ƒä»¬ã€‚æ‰€ä»¥å°½é‡ä¸ç”¨$å…¨å±€å˜é‡ã€‚æœ‰æ—¶é¡¶çº§å®ä¾‹å˜é‡ä»£æ›¿å…¨å±€å˜é‡ã€‚</p>
<h3 id="ä½œç”¨åŸŸé—¨"><a href="#ä½œç”¨åŸŸé—¨" class="headerlink" title="ä½œç”¨åŸŸé—¨"></a>ä½œç”¨åŸŸé—¨</h3><p>ç¨‹åºä¼šåœ¨ä¸‰ä¸ªåœ°æ–¹å…³é—­å‰ä¸€ä¸ªä½œç”¨åŸŸï¼ŒåŒæ—¶æ‰“å¼€ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼š</p>
<ul>
<li>ç±»å®šä¹‰</li>
<li>æ¨¡å—å®šä¹‰</li>
<li>æ–¹æ³•</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥è¿™æ ·è¯´ï¼šclassï¼Œmoduleï¼Œdefå…³é”®å­—éƒ½å¯¹åº”ä¸€ä¸ªä½œç”¨åŸŸé—¨ã€‚</p>
<h3 id="æ‰å¹³åŒ–ä½œç”¨åŸŸ"><a href="#æ‰å¹³åŒ–ä½œç”¨åŸŸ" class="headerlink" title="æ‰å¹³åŒ–ä½œç”¨åŸŸ"></a>æ‰å¹³åŒ–ä½œç”¨åŸŸ</h3><p><strong>ä½¿ç”¨Class.newå’Œdefine_methodæ¥ç©¿è¶Šä½œç”¨åŸŸé—¨</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :170 &gt; my_var = &quot;Success&quot;</span><br><span class="line"> =&gt; &quot;Success&quot; </span><br><span class="line">2.7.2 :163 &gt; MyClass = Class.new do</span><br><span class="line">2.7.2 :164 &gt;   puts &quot;#&#123;my_var&#125; in the class definition!&quot;</span><br><span class="line">2.7.2 :165 &gt;   define_method :my_method do</span><br><span class="line">2.7.2 :166 &gt;   &quot;# &#123;my_var&#125; in the method&quot;</span><br><span class="line">2.7.2 :167 &gt;   end</span><br><span class="line">2.7.2 :168 &gt; end</span><br><span class="line">Success in the class definition!</span><br><span class="line">(irb):163: warning: already initialized constant MyClass</span><br><span class="line">(irb):158: warning: previous definition of MyClass was here</span><br><span class="line"> =&gt; MyClass </span><br></pre></td></tr></table></figure>

<p><strong>å…±äº«ä½œç”¨åŸŸ</strong></p>
<h3 id="é—­åŒ…å°ç»“"><a href="#é—­åŒ…å°ç»“" class="headerlink" title="é—­åŒ…å°ç»“"></a>é—­åŒ…å°ç»“</h3><p>æ¯ä¸ªRubyä½œç”¨åŸŸéƒ½åŒ…å«ä¸€ç»„ç»‘å®šï¼Œä¸åŒä½œç”¨åŸŸä¹‹é—´è¢«ä½œç”¨åŸŸé—¨åˆ†éš”å¼€æ¥ã€‚</p>
<p>â€¦â€¦</p>
<h2 id="instance-evalæ–¹æ³•"><a href="#instance-evalæ–¹æ³•" class="headerlink" title="instance_evalæ–¹æ³•"></a>instance_evalæ–¹æ³•</h2><p>è¿™æ˜¯å¦å¤–ä¸€ç§æ··åˆä»£ç å’Œç»‘å®šçš„æ–¹å¼ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :214 &gt; class MyClass</span><br><span class="line">2.7.2 :215 &gt;   def initialize</span><br><span class="line">2.7.2 :216 &gt;     @v = 1</span><br><span class="line">2.7.2 :217 &gt;   end</span><br><span class="line">2.7.2 :218 &gt; end</span><br><span class="line"> =&gt; :initialize </span><br><span class="line">2.7.2 :219 &gt; obj = MyClass.new</span><br><span class="line"> =&gt; #&lt;MyClass:0x00007f8fa39d4380 @v=1&gt; </span><br><span class="line">2.7.2 :220 &gt; obj.instance_eval do</span><br><span class="line">2.7.2 :221 &gt;   self</span><br><span class="line">2.7.2 :222 &gt;   @v</span><br><span class="line">2.7.2 :223 &gt; end</span><br><span class="line"> =&gt; 1 </span><br><span class="line">2.7.2 :224 &gt; v = 2</span><br><span class="line"> =&gt; 2 </span><br><span class="line">2.7.2 :225 &gt; obj.instance_eval &#123; @v = v &#125;</span><br><span class="line"> =&gt; 2 </span><br><span class="line">2.7.2 :226 &gt; obj.instance_eval &#123; @v&#125;</span><br><span class="line"> =&gt; 2 </span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æŠŠä¼ é€’ç»™instance_evalæ–¹æ³•çš„ä»£ç å—ç§°ä¸º<strong>ä¸Šä¸‹æ–‡æ¢é’ˆ</strong>ï¼Œå› ä¸ºå®ƒå°±åƒæ˜¯ä¸€ä¸ªæ·±å…¥åˆ°å¯¹è±¡ä¸­çš„ä»£ç ç‰‡æ®µï¼Œå¹¶å¯ä»¥å¯¹é‚£ä¸ªå¯¹è±¡è¿›è¡Œæ“ä½œã€‚</p>
<h3 id="æ‰“ç ´å°è£…"><a href="#æ‰“ç ´å°è£…" class="headerlink" title="æ‰“ç ´å°è£…"></a>æ‰“ç ´å°è£…</h3><p>Instance_execæ–¹æ³•ç¨å¾®çµæ´»ä¸€äº›ï¼Œå…è®¸å¯¹ä»£ç å—ä¼ å…¥å‚æ•°ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :256 &gt; class C</span><br><span class="line">2.7.2 :257 &gt;   def initialize</span><br><span class="line">2.7.2 :258 &gt;     @x=1</span><br><span class="line">2.7.2 :259 &gt;   end</span><br><span class="line">2.7.2 :260 &gt; end</span><br><span class="line"> =&gt; :initialize </span><br><span class="line">2.7.2 :261 &gt; class D</span><br><span class="line">2.7.2 :262 &gt;   def twisted_method</span><br><span class="line">2.7.2 :263 &gt;     @y = 2</span><br><span class="line">2.7.2 :264 &gt;     C.new.instance_eval &#123; &quot;@x: #&#123;@x&#125;, @y: #&#123;@y&#125;&quot; &#125;</span><br><span class="line">2.7.2 :265 &gt;   end</span><br><span class="line">2.7.2 :266 &gt; end</span><br><span class="line"> =&gt; :twisted_method </span><br><span class="line">2.7.2 :267 &gt; D.new.twisted_method</span><br><span class="line"> =&gt; &quot;@x: 1, @y: &quot; </span><br></pre></td></tr></table></figure>

<p><strong>å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼šinstance_evalæ–¹æ³•æŠŠreceiverå˜æˆå½“å‰å¯¹è±¡selfæ—¶ï¼Œè°ƒç”¨è€…çš„å®ä¾‹å˜é‡å°±è½åœ¨äº†ä½œç”¨åŸŸèŒƒå›´å¤–é¢ã€‚</strong></p>
<p><em><strong>Instance_execæ–¹æ³•å¯ä»¥è§£å†³æ­¤é—®é¢˜</strong></em></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :275 &gt; class D</span><br><span class="line">2.7.2 :276 &gt;   def twisted_method</span><br><span class="line">2.7.2 :277 &gt;     @y = 2</span><br><span class="line">2.7.2 :278 &gt;     C.new.instance_exec(@y) &#123;|y| &quot;@x: #&#123;@x&#125;, @y: #&#123;y&#125;&quot; &#125;</span><br><span class="line">2.7.2 :279 &gt;   end</span><br><span class="line">2.7.2 :280 &gt; end</span><br><span class="line"> =&gt; :twisted_method </span><br><span class="line">2.7.2 :281 &gt; D.new.twisted_method</span><br><span class="line"> =&gt; &quot;@x: 1, @y: 2&quot; </span><br></pre></td></tr></table></figure>

<h3 id="æ´å‡€å®¤"><a href="#æ´å‡€å®¤" class="headerlink" title="æ´å‡€å®¤"></a>æ´å‡€å®¤</h3><p>æ´å‡€å®¤åªæ˜¯ä¸€ä¸ªç”¨æ¥æ‰§è¡Œå—çš„ç¯å¢ƒã€‚å®ƒå¯ä»¥æä¾›è‹¥å¹²æœ‰ç”¨çš„æ–¹æ³•ä¾›ä»£ç å—è°ƒç”¨ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªç†æƒ³åŒ–çš„æ´å‡€å®¤æ˜¯ä¸åº”è¯¥æœ‰ä»»ä½•æ–¹æ³•æˆ–è€…å®ä¾‹å˜é‡çš„ã€‚å› ä¸ºè¿™æ ·çš„è¯ï¼Œå…¶ä¸­çš„æ–¹æ³•åæˆ–å®ä¾‹å˜é‡åæœ‰å¯èƒ½å’Œä»£ç å—ä»å…¶ç¯å¢ƒä¸­å¸¦æ¥çš„åå­—å†²çªã€‚</p>
<p>å› æ­¤ï¼ŒBasicObjectçš„å®ä¾‹å¾€å¾€ç”¨æ¥å……å½“æ´å‡€å®¤ï¼Œ<strong>å› ä¸ºå®ƒæ˜¯ç™½æ¿ç±»</strong>ï¼Œå‡ ä¹æ²¡æœ‰ä»»ä½•æ–¹æ³•ã€‚</p>
<h2 id="å¯è°ƒç”¨å¯¹è±¡"><a href="#å¯è°ƒç”¨å¯¹è±¡" class="headerlink" title="å¯è°ƒç”¨å¯¹è±¡"></a>å¯è°ƒç”¨å¯¹è±¡</h2><p>ä»åº•å±‚çœ‹ï¼Œä½¿ç”¨ä»£ç å—çš„ä¸¤æ­¥ï¼š</p>
<ul>
<li>å°†ä»£ç æ‰“åŒ…å¤‡ç”¨</li>
<li>è°ƒç”¨ä»£ç å—ï¼Œæ‰§è¡Œä»£ç </li>
</ul>
<p>è¿™ç§æ‰“åŒ…ä»£ç ï¼Œä¹‹åè°ƒç”¨çš„æœºåˆ¶ä¸»è¦æœ‰ï¼š</p>
<ul>
<li>ä½¿ç”¨procï¼Œprocæ˜¯ç”±å—è½¬æ¢è€Œæ¥çš„å¯¹è±¡</li>
<li>ä½¿ç”¨lambdaï¼Œå®ƒæ˜¯procçš„å˜ç§</li>
<li>ä½¿ç”¨æ–¹æ³•</li>
</ul>
<h3 id="Procå¯¹è±¡"><a href="#Procå¯¹è±¡" class="headerlink" title="Procå¯¹è±¡"></a>Procå¯¹è±¡</h3><p>Rubyä¸­çš„ç»å¤§å¤šæ•°ä¸œè¥¿éƒ½æ˜¯å¯¹è±¡ï¼Œä½†æ˜¯ä»£ç å—ä¸æ˜¯ã€‚é‚£ä¹ˆæƒ³å­˜å‚¨ä¸€ä¸ªå—ä¾›ä»¥åæ‰§è¡Œåˆ™éœ€è¦ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>Rubyåœ¨æ ‡å‡†åº“ä¸­æä¾›äº†ä¸€ä¸ªåä¸ºprocçš„ç±»ã€‚procå°±æ˜¯ç”±å—è½¬æ¢è€Œæ¥çš„å¯¹è±¡ã€‚</p>
<p>å¼€å‘è€…å¯ä»¥æŠŠä»£ç å—ä¼ ç»™Proc.newæ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªprocï¼Œå¹¶ä½¿ç”¨Proc#callæ–¹æ³•æ¥æ‰§è¡Œè¿™ä¸ªç”±ä»£ç å—è½¬æ¢è€Œæ¥çš„å¯¹è±¡â€”â€”å»¶è¿Ÿæ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :002 &gt; inc  = Proc.new &#123; |x| x+1&#125;</span><br><span class="line"> =&gt; #&lt;Proc:0x00007fde808a7620 (irb):2&gt; </span><br><span class="line">2.7.2 :003 &gt; inc.call(2)</span><br><span class="line"> =&gt; 3 </span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :004 &gt; dec = lambda &#123; |x| x-1 &#125;</span><br><span class="line"> =&gt; #&lt;Proc:0x00007fde8087c100 (irb):4 (lambda)&gt; </span><br><span class="line">2.7.2 :005 &gt; dec.class</span><br><span class="line"> =&gt; Proc </span><br><span class="line">2.7.2 :006 &gt; dec.call(2)</span><br><span class="line"> =&gt; 1 </span><br></pre></td></tr></table></figure>

<p><em>p = -&gt;(x) {x+1}<em><strong>ç­‰ä»·äº</strong></em>p=lambda{|x| x+1}</em></p>
<p><strong>ä½¿ç”¨&amp;å¯ä»¥å®ç°Procå’Œä»£ç å—çš„äº’ç›¸è½¬æ¢</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :010 &gt; p = my_method&#123;|name| &quot;hello #&#123;name&#125;&quot;&#125;</span><br><span class="line"> =&gt; #&lt;Proc:0x00007fde7aba5c38 (irb):10&gt; </span><br><span class="line">2.7.2 :011 &gt; p.class</span><br><span class="line"> =&gt; Proc </span><br><span class="line">2.7.2 :012 &gt; p.call(&quot;Bill&quot;)</span><br><span class="line"> =&gt; &quot;hello Bill&quot; </span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :013 &gt; def my_method(greeting)</span><br><span class="line">2.7.2 :014 &gt;   &quot;#&#123;greeting&#125;, #&#123;yield&#125;&quot;</span><br><span class="line">2.7.2 :015 &gt; end</span><br><span class="line"> =&gt; :my_method </span><br><span class="line">2.7.2 :017 &gt; my_proc = proc&#123;&quot;Bill&quot;&#125;</span><br><span class="line"> =&gt; #&lt;Proc:0x00007fde80c98310 (irb):17&gt; </span><br><span class="line">2.7.2 :018 &gt; my_method(&quot;hello&quot;,&amp;my_proc)</span><br><span class="line"> =&gt; &quot;hello, Bill&quot; </span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨å¦‚ä¸Šçš„my_methodæ–¹æ³•æ—¶ï¼Œ&amp;æ“ä½œç¬¦ä¼šæŠŠmy_procè½¬æ¢ä¸ºä»£ç å—ï¼Œå†æŠŠä»£ç å—ä¼ ç»™è¿™ä¸ªæ–¹æ³•ã€‚</p>
<h3 id="Procä¸Lambdaçš„å¯¹æ¯”"><a href="#Procä¸Lambdaçš„å¯¹æ¯”" class="headerlink" title="Procä¸Lambdaçš„å¯¹æ¯”"></a>Procä¸Lambdaçš„å¯¹æ¯”</h3><p><strong>ä½¿ç”¨Proc#lambdaï¼Ÿæ–¹æ³•æ£€æµ‹Procæ˜¯ä¸æ˜¯lambda</strong></p>
<p>Procå’Œlambdaçš„é‡è¦å·®åˆ«æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li>returnå…³é”®å­—</li>
<li>å‚æ•°æ ¡éªŒ</li>
</ul>
<p>lambdaä¸­ï¼Œreturnä»…è¡¨ç¤ºä»è¿™ä¸ªlambdaä¸­è¿”å›</p>
<p>procä¸­ï¼Œreturnè¡¨ç¤ºä»å®šä¹‰procçš„ä½œç”¨åŸŸä¸­è¿”å›</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :034 &gt; p = Proc.new &#123; |a,b| [a,b]&#125;</span><br><span class="line"> =&gt; #&lt;Proc:0x00007fde80c60910 (irb):34&gt; </span><br><span class="line">2.7.2 :035 &gt; p.arity</span><br><span class="line"> =&gt; 2 </span><br><span class="line">2.7.2 :036 &gt; p.call(1,2,3)</span><br><span class="line"> =&gt; [1, 2] </span><br><span class="line">2.7.2 :037 &gt; p.call(1)</span><br><span class="line"> =&gt; [1, nil] </span><br></pre></td></tr></table></figure>

<p>ç®€å•è¯´ï¼šprocä¼šæŠŠä¼ æ¥çš„å‚æ•°è°ƒæ•´æˆè‡ªå·±æœŸæœ›çš„å½¢å¼ï¼Œè€Œlambdaå‡å¦‚å’Œè‡ªå·±æ‰€æœŸæœ›çš„å½¢å¼ä¸åŒï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚</p>
<p>æ•´ä½“æ¥è¯´ï¼šlambdaæ›´ç›´è§‚ï¼Œå› ä¸ºå®ƒæ›´åƒæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå¯¹å‚æ•°æ•°é‡è¦æ±‚ä¸¥æ ¼ï¼Œè€Œä¸”è°ƒç”¨returnæ—¶ä»…ä»ä»£ç ä¸­è¿”å›ã€‚</p>
<h3 id="Methodå¯¹è±¡"><a href="#Methodå¯¹è±¡" class="headerlink" title="Methodå¯¹è±¡"></a>Methodå¯¹è±¡</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :038 &gt; class MyClass</span><br><span class="line">2.7.2 :039 &gt;   def initialize(value)</span><br><span class="line">2.7.2 :040 &gt;     @x=value</span><br><span class="line">2.7.2 :041 &gt;   end</span><br><span class="line">2.7.2 :042 &gt;   def my_method</span><br><span class="line">2.7.2 :043 &gt;     @x</span><br><span class="line">2.7.2 :044 &gt;   end</span><br><span class="line">2.7.2 :045 &gt; end</span><br><span class="line"> =&gt; :my_method </span><br><span class="line">2.7.2 :046 &gt; object = MyClass.new(1)</span><br><span class="line"> =&gt; #&lt;MyClass:0x00007fde7b071a50 @x=1&gt; </span><br><span class="line">2.7.2 :048 &gt; m = object.method :my_method</span><br><span class="line"> =&gt; #&lt;Method: MyClass#my_method() (irb):42&gt; </span><br><span class="line">2.7.2 :049 &gt; m.call</span><br><span class="line"> =&gt; 1 </span><br></pre></td></tr></table></figure>

<p><strong>é€šè¿‡è°ƒç”¨Kernel#methodæ–¹æ³•ï¼Œå¯ä»¥è·å¾—ä¸€ä¸ªç”¨Methodå¯¹è±¡è¡¨ç¤ºçš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä»¥åä½¿ç”¨Method#callæ–¹æ³•å¯¹å®ƒè¿›è¡Œè°ƒç”¨ã€‚</strong></p>
<p>Methodå¯¹è±¡ç±»ä¼¼ä»£ç å—æˆ–è€…lambdaï¼Œå®é™…ä¸Šï¼Œå¯ä»¥é€šè¿‡Method#to_procæ–¹æ³•æŠŠMethodå¯¹è±¡è½¬æ¢ä¸ºProcã€‚å¦å¤–è¿˜å¯ä»¥é€šè¿‡define_methodæ–¹æ³•æŠŠä»£ç å—è½¬æ¢ä¸ºæ–¹æ³•ã€‚</p>
<h3 id="å¯è°ƒç”¨å¯¹è±¡å°ç»“"><a href="#å¯è°ƒç”¨å¯¹è±¡å°ç»“" class="headerlink" title="å¯è°ƒç”¨å¯¹è±¡å°ç»“"></a>å¯è°ƒç”¨å¯¹è±¡å°ç»“</h3><p>å¯è°ƒç”¨å¯¹è±¡æ˜¯å¯ä»¥æ‰§è¡Œçš„ä»£ç ç‰‡æ®µï¼Œæœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>ä»£ç å—ï¼ˆå®ƒä»¬ä¸æ˜¯çœŸæ­£çš„â€œå¯¹è±¡â€ ï¼Œä½†æ˜¯å®ƒä»¬æ˜¯â€œå¯è°ƒç”¨çš„â€ ï¼‰ï¼šåœ¨å®šä¹‰å®ƒä»¬çš„ä½œç”¨åŸŸä¸­æ‰§è¡Œã€‚</li>
<li>procï¼š Procç±»çš„å¯¹è±¡è·Ÿä»£ç å—ä¸€æ ·ï¼Œä¹Ÿåœ¨å®šä¹‰è‡ªèº«çš„ä½œç”¨åŸŸä¸­æ‰§è¡Œã€‚</li>
<li>lambdaï¼šä¹Ÿæ˜¯Procç±»çš„å¯¹è±¡ï¼Œä½†æ˜¯è·Ÿæ™®é€šçš„procæœ‰ç»†å¾®çš„å·®åˆ«ã€‚å®ƒè·Ÿå—å’Œprocä¸€æ ·éƒ½æ˜¯é—­åŒ…ï¼Œå› æ­¤ä¹Ÿåœ¨å®šä¹‰è‡ªèº«çš„ä½œç”¨åŸŸä¸­æ‰§è¡Œã€‚</li>
<li>æ–¹æ³•ï¼šç»‘å®šäºä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨æ‰€ç»‘å®šå¯¹è±¡çš„ä½œç”¨åŸŸä¸­æ‰§è¡Œã€‚å®ƒä»¬ä¹Ÿå¯ä»¥ä¸è¿™ä¸ªä½œç”¨åŸŸè§£é™¤ç»‘å®šï¼Œç„¶åå†é‡æ–°ç»‘å®šåˆ°å¦ä¸€ä¸ªå¯¹è±¡çš„ä½œç”¨åŸŸä¸Šã€‚</li>
</ul>
<h2 id="ç¼–å†™é¢†åŸŸä¸“å±è¯­è¨€-DSL"><a href="#ç¼–å†™é¢†åŸŸä¸“å±è¯­è¨€-DSL" class="headerlink" title="ç¼–å†™é¢†åŸŸä¸“å±è¯­è¨€(DSL)"></a>ç¼–å†™é¢†åŸŸä¸“å±è¯­è¨€(DSL)</h2><h3 id="ç¬¬ä¸€ä¸ªé¢†åŸŸä¸“å±è¯­è¨€"><a href="#ç¬¬ä¸€ä¸ªé¢†åŸŸä¸“å±è¯­è¨€" class="headerlink" title="ç¬¬ä¸€ä¸ªé¢†åŸŸä¸“å±è¯­è¨€"></a>ç¬¬ä¸€ä¸ªé¢†åŸŸä¸“å±è¯­è¨€</h3><h2 id="æ”¹è‰¯çš„DSL"><a href="#æ”¹è‰¯çš„DSL" class="headerlink" title="æ”¹è‰¯çš„DSL"></a>æ”¹è‰¯çš„DSL</h2><h2 id="å°ç»“-1"><a href="#å°ç»“-1" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><h1 id="ç±»å®šä¹‰"><a href="#ç±»å®šä¹‰" class="headerlink" title="ç±»å®šä¹‰"></a>ç±»å®šä¹‰</h1><p><strong>å®šä¹‰RUbyç±»å®é™…ä¸Šæ˜¯åœ¨è¿è¡Œä»£ç </strong></p>
<p><strong>å®ç±»å¯ä»¥ç”¨æ¥ä¿®æ”¹ç±»</strong></p>
<p><strong>ç¯ç»•åˆ«åå¯ä»¥åœ¨å…¶ä»–æ–¹æ³•å‰åå°è£…é¢å¤–ä»£ç </strong></p>
<p>Rubyæœ€ä¼˜é›…çš„ç‰¹æ€§ä¹‹ä¸€ï¼š<strong>å•ä½“ç±»</strong></p>
<h2 id="æ­ç§˜ç±»å®šä¹‰"><a href="#æ­ç§˜ç±»å®šä¹‰" class="headerlink" title="æ­ç§˜ç±»å®šä¹‰"></a>æ­ç§˜ç±»å®šä¹‰</h2><h3 id="æ·±å…¥ç±»å®šä¹‰"><a href="#æ·±å…¥ç±»å®šä¹‰" class="headerlink" title="æ·±å…¥ç±»å®šä¹‰"></a>æ·±å…¥ç±»å®šä¹‰</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2.7.2 :061 &gt; class MyClass</span><br><span class="line">2.7.2 :062 &gt;   puts &quot;hello&quot;</span><br><span class="line">2.7.2 :063 &gt; end</span><br><span class="line">hello</span><br><span class="line"> =&gt; nil </span><br><span class="line">2.7.2 :064 &gt; result = class MyClass</span><br><span class="line">2.7.2 :065 &gt;   self</span><br><span class="line">2.7.2 :066 &gt; end</span><br><span class="line"> =&gt; MyClass </span><br><span class="line">2.7.2 :067 &gt; result</span><br><span class="line"> =&gt; MyClass </span><br></pre></td></tr></table></figure>

<h3 id="å½“å‰ç±»"><a href="#å½“å‰ç±»" class="headerlink" title="å½“å‰ç±»"></a>å½“å‰ç±»</h3><p>ä¸ç®¡å¤„åœ¨Rubyç¨‹åºçš„å“ªä¸ªä½ç½®ï¼Œæ€»å­˜åœ¨ä¸€ä¸ªå½“å‰å¯¹è±¡ï¼šselfã€‚åŒæ ·ä¹Ÿçºµä½¿æœ‰ä¸€ä¸ªå½“å‰ç±»ï¼ˆæˆ–æ¨¡å—ï¼‰å­˜åœ¨ã€‚</p>
<p><strong>class_evalæ–¹æ³•</strong></p>
<p>class_evalæ–¹æ³•ä¼šåœ¨ä¸€ä¸ªå·²å­˜åœ¨ç±»çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œä¸€ä¸ªå—ã€‚</p>
<p>class_evalä¼šåŒæ—¶ä¿®æ”¹selfå’Œå½“å‰ç±»</p>
<ul>
<li><p>Rubyè§£é‡Šå™¨æ€»æ˜¯è¿½è¸ªå½“å‰ç±»ï¼ˆæˆ–æ¨¡å—ï¼‰çš„å¼•ç”¨ã€‚æ‰€æœ‰ä½¿ç”¨defå®šä¹‰çš„æ–¹æ³•éƒ½æˆä¸ºå½“å‰ç±»çš„å®ä¾‹æ–¹æ³•ã€‚</p>
</li>
<li><p>åœ¨ç±»å®šä¹‰ä¸­ï¼Œå½“å‰ç±»å°±æ˜¯selfâ€”æ­£åœ¨å®šä¹‰çš„ç±»ã€‚</p>
</li>
<li><p>å¦‚æœä½ æœ‰ä¸€ä¸ªç±»çš„å¼•ç”¨ï¼Œåˆ™å¯ä»¥ç”¨class_eval ï¼ˆæˆ–moduleâ€”evalï¼‰æ–¹æ³•æ‰“å¼€è¿™ä¸ªç±»ã€‚</p>
</li>
</ul>
<h3 id="ç±»å®ä¾‹å˜é‡"><a href="#ç±»å®ä¾‹å˜é‡" class="headerlink" title="ç±»å®ä¾‹å˜é‡"></a>ç±»å®ä¾‹å˜é‡</h3><p>Rubyè§£é‡Šå™¨å‡å®šæ‰€æœ‰çš„å®ä¾‹å˜é‡éƒ½å±äºå½“å‰å¯¹è±¡selfï¼Œåœ¨ç±»å®šä¹‰æ—¶ä¹Ÿå¦‚æ­¤ï¼</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">irb(main):002:1* class MyClass</span><br><span class="line">irb(main):003:1*   @my_var = 1</span><br><span class="line">irb(main):004:2*   def self.read;</span><br><span class="line">irb(main):005:2*     @my_var;</span><br><span class="line">irb(main):006:1*   end</span><br><span class="line">irb(main):007:2*   def write;</span><br><span class="line">irb(main):008:2*     @my_var = 2;</span><br><span class="line">irb(main):009:1*   end</span><br><span class="line">irb(main):010:2*   def read;</span><br><span class="line">irb(main):011:2*     @my_var;</span><br><span class="line">irb(main):012:1*   end</span><br><span class="line">irb(main):013:0&gt; end</span><br><span class="line">=&gt; :read</span><br><span class="line">irb(main):014:0&gt; obj = MyClass.new</span><br><span class="line">irb(main):015:0&gt; obj.read</span><br><span class="line">=&gt; nil</span><br><span class="line">irb(main):016:0&gt; obj.write</span><br><span class="line">=&gt; 2</span><br><span class="line">irb(main):017:0&gt; obj.read</span><br><span class="line">=&gt; 2</span><br><span class="line">irb(main):018:0&gt; MyClass.read</span><br><span class="line">=&gt; 1</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ä¸€ä¸ª@my_varå˜é‡å®šä¹‰äºobjå……å½“selfçš„æ—¶åˆ»ï¼Œå®ƒæ˜¯objå¯¹è±¡çš„å®ä¾‹å˜é‡ã€‚</p>
<p>å¦å¤–ä¸€ä¸ª@my_varå˜é‡å®šä¹‰äºMyClasså……å½“selfçš„æ—¶åˆ»ï¼Œå®ƒæ˜¯MyClassçš„å®ä¾‹å˜é‡ï¼Œä¹Ÿå°±æ˜¯<strong>ç±»å®ä¾‹å˜é‡</strong></p>
<p>ä¸€ä¸ªç±»å®ä¾‹å˜é‡åªå¯ä»¥è¢«ç±»æœ¬èº«æ‰€è®¿é—®ï¼Œè€Œä¸èƒ½è¢«ç±»çš„å®ä¾‹æˆ–è€…å­ç±»æ‰€è®¿é—®ã€‚</p>
<p><strong>ç±»å˜é‡</strong></p>
<p>â€‹    ç±»å˜é‡ä»¥@@æ‰“å¤´ï¼Œå®ƒä»¬å¯ä»¥è¢«å­ç±»æˆ–è€…ç±»çš„å®ä¾‹æ‰€ä½¿ç”¨ã€‚</p>
<h2 id="Tabooç±»"><a href="#Tabooç±»" class="headerlink" title="Tabooç±»"></a><del>Tabooç±»</del></h2><h2 id="å•ä»¶æ–¹æ³•"><a href="#å•ä»¶æ–¹æ³•" class="headerlink" title="å•ä»¶æ–¹æ³•"></a>å•ä»¶æ–¹æ³•</h2><h3 id="ä½¿ç”¨å•ä»¶æ–¹æ³•"><a href="#ä½¿ç”¨å•ä»¶æ–¹æ³•" class="headerlink" title="ä½¿ç”¨å•ä»¶æ–¹æ³•"></a>ä½¿ç”¨å•ä»¶æ–¹æ³•</h3><h3 id="ç±»æ–¹æ³•çš„çœŸç›¸"><a href="#ç±»æ–¹æ³•çš„çœŸç›¸" class="headerlink" title="ç±»æ–¹æ³•çš„çœŸç›¸"></a>ç±»æ–¹æ³•çš„çœŸç›¸</h3><h3 id="ç±»å®"><a href="#ç±»å®" class="headerlink" title="ç±»å®"></a>ç±»å®</h3><h2 id="å•ä»¶ç±»"><a href="#å•ä»¶ç±»" class="headerlink" title="å•ä»¶ç±»"></a>å•ä»¶ç±»</h2><h3 id="å•ä»¶æ–¹æ³•çš„ç¥å¥‡ä¹‹å¤„"><a href="#å•ä»¶æ–¹æ³•çš„ç¥å¥‡ä¹‹å¤„" class="headerlink" title="å•ä»¶æ–¹æ³•çš„ç¥å¥‡ä¹‹å¤„"></a>å•ä»¶æ–¹æ³•çš„ç¥å¥‡ä¹‹å¤„</h3><h3 id="æ­ç§˜å•ä»¶ç±»"><a href="#æ­ç§˜å•ä»¶ç±»" class="headerlink" title="æ­ç§˜å•ä»¶ç±»"></a>æ­ç§˜å•ä»¶ç±»</h3><h3 id="è¡¥å……æ–¹æ³•æŸ¥æ‰¾"><a href="#è¡¥å……æ–¹æ³•æŸ¥æ‰¾" class="headerlink" title="è¡¥å……æ–¹æ³•æŸ¥æ‰¾"></a>è¡¥å……æ–¹æ³•æŸ¥æ‰¾</h3><h2 id="æ¨¡å—çš„éº»çƒ¦"><a href="#æ¨¡å—çš„éº»çƒ¦" class="headerlink" title="æ¨¡å—çš„éº»çƒ¦"></a>æ¨¡å—çš„éº»çƒ¦</h2><h2 id="æ–¹æ³•åŒ…è£…å™¨"><a href="#æ–¹æ³•åŒ…è£…å™¨" class="headerlink" title="æ–¹æ³•åŒ…è£…å™¨"></a>æ–¹æ³•åŒ…è£…å™¨</h2><h3 id="æ–¹æ³•åˆ«å"><a href="#æ–¹æ³•åˆ«å" class="headerlink" title="æ–¹æ³•åˆ«å"></a>æ–¹æ³•åˆ«å</h3><h3 id="æ›´å¤šçš„æ–¹æ³•åŒ…è£…å™¨"><a href="#æ›´å¤šçš„æ–¹æ³•åŒ…è£…å™¨" class="headerlink" title="æ›´å¤šçš„æ–¹æ³•åŒ…è£…å™¨"></a>æ›´å¤šçš„æ–¹æ³•åŒ…è£…å™¨</h3><h3 id="è§£å†³Amazonéš¾é¢˜"><a href="#è§£å†³Amazonéš¾é¢˜" class="headerlink" title="è§£å†³Amazonéš¾é¢˜"></a>è§£å†³Amazonéš¾é¢˜</h3><h2 id="æ‰“ç ´æ•°å­¦è§„å¾‹"><a href="#æ‰“ç ´æ•°å­¦è§„å¾‹" class="headerlink" title="æ‰“ç ´æ•°å­¦è§„å¾‹"></a>æ‰“ç ´æ•°å­¦è§„å¾‹</h2><h2 id="å°ç»“-2"><a href="#å°ç»“-2" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><h1 id="ç¼–å†™ä»£ç çš„ä»£ç "><a href="#ç¼–å†™ä»£ç çš„ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç çš„ä»£ç "></a>ç¼–å†™ä»£ç çš„ä»£ç </h1><h2 id="é€šå‘å‘¨æœ«çš„ç¼–ç¨‹ä¹‹è·¯"><a href="#é€šå‘å‘¨æœ«çš„ç¼–ç¨‹ä¹‹è·¯" class="headerlink" title="é€šå‘å‘¨æœ«çš„ç¼–ç¨‹ä¹‹è·¯"></a>é€šå‘å‘¨æœ«çš„ç¼–ç¨‹ä¹‹è·¯</h2><h3 id="è€æ¿çš„ä»»åŠ¡"><a href="#è€æ¿çš„ä»»åŠ¡" class="headerlink" title="è€æ¿çš„ä»»åŠ¡"></a>è€æ¿çš„ä»»åŠ¡</h3><h3 id="å¼€å‘è®¡åˆ’"><a href="#å¼€å‘è®¡åˆ’" class="headerlink" title="å¼€å‘è®¡åˆ’"></a>å¼€å‘è®¡åˆ’</h3><h2 id="Kernel-evalæ–¹æ³•"><a href="#Kernel-evalæ–¹æ³•" class="headerlink" title="Kernel#evalæ–¹æ³•"></a>Kernel#evalæ–¹æ³•</h2><h3 id="REST-Clientçš„ä¾‹å­"><a href="#REST-Clientçš„ä¾‹å­" class="headerlink" title="REST Clientçš„ä¾‹å­"></a>REST Clientçš„ä¾‹å­</h3><h3 id="ç»‘å®šå¯¹è±¡"><a href="#ç»‘å®šå¯¹è±¡" class="headerlink" title="ç»‘å®šå¯¹è±¡"></a>ç»‘å®šå¯¹è±¡</h3><h3 id="irbçš„ä¾‹å­"><a href="#irbçš„ä¾‹å­" class="headerlink" title="irbçš„ä¾‹å­"></a>irbçš„ä¾‹å­</h3><h3 id="å¯¹æ¯”ä»£ç å­—ç¬¦ä¸²ä¸å—"><a href="#å¯¹æ¯”ä»£ç å­—ç¬¦ä¸²ä¸å—" class="headerlink" title="å¯¹æ¯”ä»£ç å­—ç¬¦ä¸²ä¸å—"></a>å¯¹æ¯”ä»£ç å­—ç¬¦ä¸²ä¸å—</h3><h3 id="evalæ–¹æ³•çš„éº»çƒ¦"><a href="#evalæ–¹æ³•çš„éº»çƒ¦" class="headerlink" title="evalæ–¹æ³•çš„éº»çƒ¦"></a>evalæ–¹æ³•çš„éº»çƒ¦</h3><h2 id="æ ¡éªŒè¿‡çš„å±æ€§-ç¬¬ä¸€æ­¥"><a href="#æ ¡éªŒè¿‡çš„å±æ€§-ç¬¬ä¸€æ­¥" class="headerlink" title="æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬ä¸€æ­¥)"></a>æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬ä¸€æ­¥)</h2><h2 id="æ ¡éªŒè¿‡çš„å±æ€§-ç¬¬äºŒæ­¥"><a href="#æ ¡éªŒè¿‡çš„å±æ€§-ç¬¬äºŒæ­¥" class="headerlink" title="æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬äºŒæ­¥)"></a>æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬äºŒæ­¥)</h2><h2 id="æ ¡éªŒè¿‡çš„å±æ€§-ç¬¬ä¸‰æ­¥"><a href="#æ ¡éªŒè¿‡çš„å±æ€§-ç¬¬ä¸‰æ­¥" class="headerlink" title="æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬ä¸‰æ­¥)"></a>æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬ä¸‰æ­¥)</h2><h2 id="æ ¡éªŒè¿‡çš„å±æ€§-ç¬¬å››æ­¥"><a href="#æ ¡éªŒè¿‡çš„å±æ€§-ç¬¬å››æ­¥" class="headerlink" title="æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬å››æ­¥)"></a>æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬å››æ­¥)</h2><h2 id="é’©å­æ–¹æ³•"><a href="#é’©å­æ–¹æ³•" class="headerlink" title="é’©å­æ–¹æ³•"></a>é’©å­æ–¹æ³•</h2><h3 id="æ›´å¤šé’©å­æ–¹æ³•"><a href="#æ›´å¤šé’©å­æ–¹æ³•" class="headerlink" title="æ›´å¤šé’©å­æ–¹æ³•"></a>æ›´å¤šé’©å­æ–¹æ³•</h3><h3 id="VCRçš„ä¾‹å­"><a href="#VCRçš„ä¾‹å­" class="headerlink" title="VCRçš„ä¾‹å­"></a>VCRçš„ä¾‹å­</h3><h2 id="æ ¡éªŒè¿‡çš„å±æ€§-ç¬¬äº”æ­¥"><a href="#æ ¡éªŒè¿‡çš„å±æ€§-ç¬¬äº”æ­¥" class="headerlink" title="æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬äº”æ­¥)"></a>æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬äº”æ­¥)</h2><h2 id="å°ç»“-3"><a href="#å°ç»“-3" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><h1 id="å°¾å£°"><a href="#å°¾å£°" class="headerlink" title="å°¾å£°"></a>å°¾å£°</h1><p><strong>æ ¹æœ¬æ²¡æœ‰ä»€ä¹ˆå…ƒç¼–ç¨‹ï¼Œä»æ¥åªæœ‰ç¼–ç¨‹è€Œå·²</strong></p>
<h1 id="å‡†å¤‡Railsä¹‹æ—…"><a href="#å‡†å¤‡Railsä¹‹æ—…" class="headerlink" title="å‡†å¤‡Railsä¹‹æ—…"></a>å‡†å¤‡Railsä¹‹æ—…</h1><h1 id="Active-Recordçš„è®¾è®¡"><a href="#Active-Recordçš„è®¾è®¡" class="headerlink" title="Active Recordçš„è®¾è®¡"></a>Active Recordçš„è®¾è®¡</h1><h1 id="Active-Supportçš„Concernæ¨¡å—"><a href="#Active-Supportçš„Concernæ¨¡å—" class="headerlink" title="Active Supportçš„Concernæ¨¡å—"></a>Active Supportçš„Concernæ¨¡å—</h1><h1 id="alias-method-chainæ–¹æ³•æ²‰æµ®è¡¨"><a href="#alias-method-chainæ–¹æ³•æ²‰æµ®è¡¨" class="headerlink" title="alias_method_chainæ–¹æ³•æ²‰æµ®è¡¨"></a>alias_method_chainæ–¹æ³•æ²‰æµ®è¡¨</h1><h1 id="å±æ€§æ–¹æ³•çš„å‘å±•"><a href="#å±æ€§æ–¹æ³•çš„å‘å±•" class="headerlink" title="å±æ€§æ–¹æ³•çš„å‘å±•"></a>å±æ€§æ–¹æ³•çš„å‘å±•</h1><h1 id="æœ€åçš„æ€è€ƒ"><a href="#æœ€åçš„æ€è€ƒ" class="headerlink" title="æœ€åçš„æ€è€ƒ"></a>æœ€åçš„æ€è€ƒ</h1><h1 id="é™„å½•ï¼ˆæ€è€ƒï¼‰"><a href="#é™„å½•ï¼ˆæ€è€ƒï¼‰" class="headerlink" title="é™„å½•ï¼ˆæ€è€ƒï¼‰"></a>é™„å½•ï¼ˆæ€è€ƒï¼‰</h1><h2 id="include-amp-extendçš„ä½¿ç”¨åœºæ™¯"><a href="#include-amp-extendçš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="include&amp;extendçš„ä½¿ç”¨åœºæ™¯"></a>include&amp;extendçš„ä½¿ç”¨åœºæ™¯</h2><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">ä½¿ç”¨<span class="keyword">include</span>æŠŠä¸€ä¸ª<span class="class"><span class="keyword">module</span>åŒ…å«åœ¨ä¸€ä¸ª<span class="title">class</span>||<span class="title">module</span>ä¸­ï¼Œä½¿ç”¨.<span class="title">ancestors</span>å¯ä»¥å‘ç°ï¼Œ<span class="title">include</span>è¿›æ¥çš„<span class="title">class</span>||<span class="title">module</span>åœ¨ä¸Šé¢,ä¸€èˆ¬ä½¿ç”¨<span class="title">include</span>æŠŠè‡ªå·±å†™çš„<span class="title">module</span>åŒ…å«è¿›æ¥</span></span><br><span class="line"><span class="symbol">eg:</span></span><br><span class="line"></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">001</span><span class="symbol">:</span><span class="number">1</span>* <span class="class"><span class="keyword">module</span> <span class="title">A</span></span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">002</span><span class="symbol">:</span><span class="number">1</span>*   <span class="string">&quot;this is A&quot;</span></span><br><span class="line"><span class="meta">irb(main):003:0&gt;</span> end</span><br><span class="line">=&gt; <span class="string">&quot;this is A&quot;</span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">004</span><span class="symbol">:</span><span class="number">1</span>* <span class="class"><span class="keyword">class</span> <span class="title">B</span></span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">005</span><span class="symbol">:</span><span class="number">1</span>*   <span class="keyword">include</span> A</span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">006</span><span class="symbol">:</span><span class="number">1</span>*   <span class="string">&quot;this is B&quot;</span></span><br><span class="line"><span class="meta">irb(main):007:0&gt;</span> end</span><br><span class="line">=&gt; <span class="string">&quot;this is B&quot;</span></span><br><span class="line"><span class="meta">irb(main):008:0&gt;</span> B.ancestors</span><br><span class="line">=&gt; [B, A, Object, Kernel, BasicObject]</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨extend,ç»§æ‰¿å…¶ä»–<span class="class"><span class="keyword">module</span>ï¼Œä¸€èˆ¬ä½¿ç”¨<span class="title">extend</span>ç»§æ‰¿<span class="title">ruby</span>è‡ªå¸¦çš„<span class="title">module</span>&amp;<span class="title">gem</span>åŒ…çš„<span class="title">module</span></span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">001</span><span class="symbol">:</span><span class="number">1</span>* <span class="class"><span class="keyword">module</span> <span class="title">A</span></span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">002</span><span class="symbol">:</span><span class="number">1</span>*   <span class="string">&quot;this is A&quot;</span></span><br><span class="line"><span class="meta">irb(main):003:0&gt;</span> end</span><br><span class="line">=&gt; <span class="string">&quot;this is A&quot;</span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">004</span><span class="symbol">:</span><span class="number">1</span>* <span class="class"><span class="keyword">class</span> <span class="title">B</span></span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">005</span><span class="symbol">:</span><span class="number">1</span>*   extend A</span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">006</span><span class="symbol">:</span><span class="number">1</span>*   <span class="string">&quot;this is B&quot;</span></span><br><span class="line"><span class="meta">irb(main):007:0&gt;</span> end</span><br><span class="line">=&gt; <span class="string">&quot;this is B&quot;</span></span><br><span class="line"><span class="meta">irb(main):008:0&gt;</span> B.ancestors</span><br><span class="line">=&gt; [B, Object, Kernel, BasicObject]</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="åŠ¨æ€åˆ›å»ºå¯¹è±¡-amp-åŠ¨æ€è°ƒç”¨æ–¹æ³•"><a href="#åŠ¨æ€åˆ›å»ºå¯¹è±¡-amp-åŠ¨æ€è°ƒç”¨æ–¹æ³•" class="headerlink" title="åŠ¨æ€åˆ›å»ºå¯¹è±¡&amp;åŠ¨æ€è°ƒç”¨æ–¹æ³•"></a>åŠ¨æ€åˆ›å»ºå¯¹è±¡&amp;åŠ¨æ€è°ƒç”¨æ–¹æ³•</h2><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">åŠ¨æ€åˆ›å»ºå¯¹è±¡ï¼Œå·²çŸ¥ï¼Œå¯ä»¥æŠŠæ–¹æ³•ï¼Œç±»çœ‹æˆæ˜¯å¯¹è±¡</span><br><span class="line">æ‰€ä»¥----</span><br><span class="line"><span class="number">1</span>.åŠ¨æ€åˆ›å»ºæ–¹æ³•----define_method</span><br><span class="line">ä¸€èˆ¬ä¼šä½¿ç”¨define_methodç»“åˆmethod_missingæ¥ç¼–å†™DRYä»£ç ï¼ä¹Ÿå°±æ˜¯æŠŠé‡å¤çš„ä»£ç å¹²æ‰ï¼</span><br><span class="line"></span><br><span class="line"><span class="meta">2.7.2 :001 &gt;</span> <span class="class"><span class="keyword">class</span> <span class="title">Developer</span></span></span><br><span class="line"><span class="meta">2.7.2 :002 &gt;</span>   </span><br><span class="line"><span class="meta">2.7.2 :003 &gt;</span>   <span class="function"><span class="keyword">def</span> <span class="title">coding_frontend</span></span></span><br><span class="line"><span class="meta">2.7.2 :004 &gt;</span>     p <span class="string">&quot;writing frontend&quot;</span></span><br><span class="line"><span class="meta">2.7.2 :005 &gt;</span>   end</span><br><span class="line"><span class="meta">2.7.2 :006 &gt;</span>   </span><br><span class="line"><span class="meta">2.7.2 :007 &gt;</span>   <span class="function"><span class="keyword">def</span> <span class="title">coding_backend</span></span></span><br><span class="line"><span class="meta">2.7.2 :008 &gt;</span>     p <span class="string">&quot;writing backend&quot;</span></span><br><span class="line"><span class="meta">2.7.2 :009 &gt;</span>   end</span><br><span class="line"><span class="meta">2.7.2 :010 &gt;</span>   </span><br><span class="line"><span class="meta">2.7.2 :011 &gt;</span> end</span><br><span class="line"> =&gt; <span class="symbol">:coding_backend</span> </span><br><span class="line"><span class="meta">2.7.2 :012 &gt;</span> developer = Developer.new</span><br><span class="line"> =&gt; #&lt;Developer:0x00007f9168453d68&gt; </span><br><span class="line"><span class="meta">2.7.2 :013 &gt;</span> developer.coding_frontend</span><br><span class="line"><span class="string">&quot;writing frontend&quot;</span></span><br><span class="line"> =&gt; <span class="string">&quot;writing frontend&quot;</span> </span><br><span class="line"><span class="meta">2.7.2 :014 &gt;</span> developer.coding_backend</span><br><span class="line"><span class="string">&quot;writing backend&quot;</span></span><br><span class="line"> =&gt; <span class="string">&quot;writing backend&quot;</span> </span><br><span class="line"><span class="meta">2.7.2 :015 &gt;</span> <span class="class"><span class="keyword">class</span> <span class="title">Developer</span></span></span><br><span class="line"><span class="meta">2.7.2 :016 &gt;</span>   </span><br><span class="line"><span class="meta">2.7.2 :017 &gt;</span>   [<span class="string">&quot;frontend&quot;</span>, <span class="string">&quot;backend&quot;</span>].each do <span class="params">|method|</span></span><br><span class="line"><span class="meta">2.7.2 :018 &gt;</span>     define_method <span class="string">&quot;coding_<span class="subst">#&#123;method&#125;</span>&quot;</span> do</span><br><span class="line"><span class="meta">2.7.2 :019 &gt;</span>     p <span class="string">&quot;writing &quot;</span> + method.to_s</span><br><span class="line"><span class="meta">2.7.2 :020 &gt;</span>     end</span><br><span class="line"><span class="meta">2.7.2 :021 &gt;</span>   end</span><br><span class="line"><span class="meta">2.7.2 :022 &gt;</span>   </span><br><span class="line"><span class="meta">2.7.2 :023 &gt;</span> end</span><br><span class="line"> =&gt; [<span class="string">&quot;frontend&quot;</span>, <span class="string">&quot;backend&quot;</span>] </span><br><span class="line"><span class="meta">2.7.2 :024 &gt;</span> developer = Developer.new</span><br><span class="line"> =&gt; #&lt;Developer:0x00007f916c9be178&gt; </span><br><span class="line"><span class="meta">2.7.2 :025 &gt;</span> developer.coding_frontend</span><br><span class="line"><span class="string">&quot;writing frontend&quot;</span></span><br><span class="line"> =&gt; <span class="string">&quot;writing frontend&quot;</span> </span><br><span class="line"><span class="meta">2.7.2 :026 &gt;</span> developer.coding_backend</span><br><span class="line"><span class="string">&quot;writing backend&quot;</span></span><br><span class="line"> =&gt; <span class="string">&quot;writing backend&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.åŠ¨æ€åˆ›å»ºç±»----class_eval&amp;instance_eval</span><br><span class="line"></span><br><span class="line">åŠ¨æ€è°ƒç”¨æ–¹æ³•ï¼Œä½œç”¨æ˜¯å¯ä»¥æ¶ˆé™¤ç¹å¤çš„ä»£ç </span><br><span class="line"><span class="keyword">and</span></span><br><span class="line">è°ƒç”¨ä¸€ä¸ªæ–¹æ³•å®é™…ä¸Šæ˜¯ç»™ä¸€ä¸ªå¯¹è±¡å‘é€ä¸€æ¡æ¶ˆæ¯ï¼</span><br><span class="line"></span><br><span class="line">Calling Methods Dynamically</span><br><span class="line"></span><br><span class="line">å¸¸è§„çš„æ“ä½œæ˜¯ä½¿ç”¨ç‚¹æ ‡å¿—ç¬¦(.)</span><br><span class="line"></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">001</span><span class="symbol">:</span><span class="number">1</span>* <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">002</span><span class="symbol">:</span><span class="number">2</span>*   <span class="function"><span class="keyword">def</span> <span class="title">my_method</span><span class="params">(my_arg)</span></span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">003</span><span class="symbol">:</span><span class="number">2</span>*     my_arg * <span class="number">2</span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">004</span><span class="symbol">:</span><span class="number">1</span>*   <span class="keyword">end</span></span><br><span class="line"><span class="meta">irb(main):005:0&gt;</span> end</span><br><span class="line">=&gt; <span class="symbol">:my_method</span></span><br><span class="line"><span class="meta">irb(main):006:0&gt;</span> obj = MyClass.new</span><br><span class="line"><span class="meta">irb(main):007:0&gt;</span> obj.my_method(<span class="number">3</span>)</span><br><span class="line">=&gt; <span class="number">6</span></span><br><span class="line"><span class="meta">irb(main):009:0&gt;</span> obj.send(<span class="symbol">:my_method</span>,<span class="number">3</span>)</span><br><span class="line">=&gt; <span class="number">6</span></span><br><span class="line"></span><br><span class="line">åœ¨sendæ–¹æ³•ä¸­ï¼Œæƒ³è°ƒç”¨çš„æ–¹æ³•å˜æˆäº†å‚æ•°ï¼Œå¯ä»¥åŠ¨æ€æ´¾å‘ï¼</span><br><span class="line"></span><br><span class="line">å€¼å¾—æ³¨æ„çš„æ˜¯åœ¨åŠ¨æ€è°ƒç”¨æ–¹æ³•ä¸­ï¼Œæ–¹æ³•æ˜¯ä»¥Symbolçš„å½¢å¼ä½œä¸ºå‚æ•°çš„ï¼Œå› ä¸ºSymbolæ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œæ‰€ä»¥å°†æ–¹æ³•åè¡¨ç¤ºä¸ºSymbolï¼Œ<span class="keyword">and</span>  StringåŒæ ·ä¹Ÿå¯ä»¥ä½œä¸ºæ–¹æ³•çš„å‚æ•°ï¼</span><br><span class="line"></span><br><span class="line">last but <span class="keyword">not</span> least ----</span><br><span class="line"></span><br><span class="line">.sendç”šè‡³å¯ä»¥è°ƒç”¨ç§æœ‰æ–¹æ³•ï¼Œå‡å¦‚ä¸æƒ³è¿™ä¹ˆåšï¼Œå¯ä»¥ä½¿ç”¨.public_sendæ–¹æ³•ï¼ï¼ï¼</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="åŠ¨æ€æ‰§è¡Œè„šæœ¬"><a href="#åŠ¨æ€æ‰§è¡Œè„šæœ¬" class="headerlink" title="åŠ¨æ€æ‰§è¡Œè„šæœ¬"></a>åŠ¨æ€æ‰§è¡Œè„šæœ¬</h2><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># eval</span></span><br><span class="line">ä»£ç æ‰§è¡Œæœ€ç›´æ¥çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯æœ€ç›´æ¥çš„æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨eval</span><br><span class="line"><span class="meta">irb(main):009:0&gt;</span> eval(<span class="string">&quot;3-1&quot;</span>)</span><br><span class="line">=&gt; <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># instance_eval</span></span><br><span class="line">å°†æš‚æ—¶çš„å˜åŒ–å¸¦å…¥å¯¹è±¡çš„ä¸Šä¸‹æ–‡ä¸­</span><br><span class="line"></span><br><span class="line"><span class="comment"># class_eval(module_eval)</span></span><br><span class="line">ä¸´æ—¶æ€§çš„è¿›å…¥ç±»å®šä¹‰å—çš„ä¸Šä¸‹æ–‡</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">Longbiu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://www.jiangnanshaojiu.com/2021/05/04/Metaprogramming%20Ruby%202/">http://www.jiangnanshaojiu.com/2021/05/04/Metaprogramming%20Ruby%202/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://www.jiangnanshaojiu.com" target="_blank">Longbiu</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E4%B9%A6%E7%B1%8D/">ä¹¦ç±</a></div><div class="post_share"><div class="social-share" data-image="/img/ruby.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.png" target="_blank"><img class="post-qr-code-img" src="/img/wechat.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.png" target="_blank"><img class="post-qr-code-img" src="/img/alipay.png" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/05/03/Mysql%E5%AE%9E%E6%88%9845%E8%AE%B2/"><img class="prev-cover" src="/img/IMG_2317.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Mysql45è®²</div></div></a></div><div class="next-post pull-right"><a href="/2021/05/04/Array_Hash_Symbol/"><img class="next-cover" src="/img/ruby.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Array&amp;Hash&amp;Symbol</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2021/05/23/1-æ•°æ®ç»“æ„â€”â€”çº¿æ€§è¡¨/" title="1.æ•°æ®ç»“æ„â€”â€”çº¿æ€§è¡¨"><img class="cover" src="/img/data-structure.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-23</div><div class="title">1.æ•°æ®ç»“æ„â€”â€”çº¿æ€§è¡¨</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%83%E8%BF%99%E4%B8%AA%E5%AD%97%E7%9C%BC"><span class="toc-number">1.</span> <span class="toc-text">å…ƒè¿™ä¸ªå­—çœ¼</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.</span> <span class="toc-text">å¯¹è±¡æ¨¡å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%BC%80%E7%B1%BB"><span class="toc-number">2.1.</span> <span class="toc-text">æ‰“å¼€ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%AE%9A%E4%B9%89%E6%8F%AD%E7%A7%98"><span class="toc-number">2.1.1.</span> <span class="toc-text">ç±»å®šä¹‰æ­ç§˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%BC%80%E7%B1%BB%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.1.2.</span> <span class="toc-text">æ‰“å¼€ç±»çš„é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E7%9C%9F%E7%9B%B8"><span class="toc-number">2.2.</span> <span class="toc-text">ç±»çš„çœŸç›¸</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E4%B8%AD%E6%9C%89%E4%BB%80%E4%B9%88"><span class="toc-number">2.2.1.</span> <span class="toc-text">å¯¹è±¡ä¸­æœ‰ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E7%9C%9F%E7%9B%B8-1"><span class="toc-number">2.2.2.</span> <span class="toc-text">ç±»çš„çœŸç›¸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F"><span class="toc-number">2.2.3.</span> <span class="toc-text">å¸¸é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB%E7%9A%84%E5%B0%8F%E7%BB%93"><span class="toc-number">2.2.4.</span> <span class="toc-text">å¯¹è±¡å’Œç±»çš„å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%BA%E5%A4%B1%E7%9A%84%E8%BF%9E%E6%8E%A5%E7%BA%BF"><span class="toc-number">2.3.</span> <span class="toc-text">ç¼ºå¤±çš„è¿æ¥çº¿</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95%E6%97%B6%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">2.4.</span> <span class="toc-text">è°ƒç”¨æ–¹æ³•æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE"><span class="toc-number">2.4.1.</span> <span class="toc-text">æ–¹æ³•æŸ¥æ‰¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E6%96%B9%E6%B3%95"><span class="toc-number">2.4.2.</span> <span class="toc-text">æ‰§è¡Œæ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%86%E5%8C%96"><span class="toc-number">2.4.3.</span> <span class="toc-text">ç»†åŒ–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B7%E4%B9%B1%E7%9A%84%E6%A8%A1%E5%9D%97"><span class="toc-number">2.5.</span> <span class="toc-text">æ··ä¹±çš„æ¨¡å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E5%B0%8F%E7%BB%93"><span class="toc-number">2.6.</span> <span class="toc-text">å¯¹è±¡æ¨¡å‹å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%B9%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%B9%81%E5%A4%8D%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">3.1.</span> <span class="toc-text">ä»£ç ç¹å¤çš„é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%80%81%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.1.1.</span> <span class="toc-text">è€ç³»ç»Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%9A%84%E4%BC%98%E9%9B%85%E5%8C%96%F0%9F%90%B6"><span class="toc-number">3.1.2.</span> <span class="toc-text">ä»£ç çš„ä¼˜é›…åŒ–ğŸ¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E6%96%B9%E6%B3%95"><span class="toc-number">3.2.</span> <span class="toc-text">åŠ¨æ€æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">3.2.1.</span> <span class="toc-text">åŠ¨æ€è°ƒç”¨æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95"><span class="toc-number">3.2.2.</span> <span class="toc-text">åŠ¨æ€å®šä¹‰æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E6%9E%84Computer%E7%B1%BB"><span class="toc-number">3.2.3.</span> <span class="toc-text">é‡æ„Computerç±»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#method-missing%E6%96%B9%E6%B3%95"><span class="toc-number">3.3.</span> <span class="toc-text">method_missingæ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A6%86%E5%86%99method-missing%E6%96%B9%E6%B3%95"><span class="toc-number">3.3.1.</span> <span class="toc-text">è¦†å†™method_missingæ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%BD%E7%81%B5%E6%96%B9%E6%B3%95"><span class="toc-number">3.3.2.</span> <span class="toc-text">å¹½çµæ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B6%88%E7%81%ADbug"><span class="toc-number">3.4.</span> <span class="toc-text">æ¶ˆç­bug</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BD%E6%9D%BF%E7%B1%BB"><span class="toc-number">3.5.</span> <span class="toc-text">ç™½æ¿ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BasicObject"><span class="toc-number">3.5.1.</span> <span class="toc-text">BasicObject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%96%B9%E6%B3%95"><span class="toc-number">3.5.2.</span> <span class="toc-text">åˆ é™¤æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9Computer"><span class="toc-number">3.5.3.</span> <span class="toc-text">ä¿®æ”¹Computer</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">3.6.</span> <span class="toc-text">å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-number">4.</span> <span class="toc-text">ä»£ç å—</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-number">4.1.</span> <span class="toc-text">å­¦ä¹ ä»£ç å—</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF"><span class="toc-number">4.1.1.</span> <span class="toc-text">ä»£ç å—å­¦ä¹ è·¯çº¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%9D%97%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">4.1.2.</span> <span class="toc-text">ä»£ç å—åŸºç¡€çŸ¥è¯†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ruby%E7%9A%84-%E7%AC%A6%E5%8F%B7"><span class="toc-number">4.2.</span> <span class="toc-text">Rubyçš„#ç¬¦å·</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#using%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">4.2.1.</span> <span class="toc-text">usingå…³é”®å­—</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%9D%97%E6%98%AF%E9%97%AD%E5%8C%85"><span class="toc-number">4.3.</span> <span class="toc-text">ä»£ç å—æ˜¯é—­åŒ…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">4.3.1.</span> <span class="toc-text">ä½œç”¨åŸŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%97%A8"><span class="toc-number">4.3.2.</span> <span class="toc-text">ä½œç”¨åŸŸé—¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%81%E5%B9%B3%E5%8C%96%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">4.3.3.</span> <span class="toc-text">æ‰å¹³åŒ–ä½œç”¨åŸŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AD%E5%8C%85%E5%B0%8F%E7%BB%93"><span class="toc-number">4.3.4.</span> <span class="toc-text">é—­åŒ…å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#instance-eval%E6%96%B9%E6%B3%95"><span class="toc-number">4.4.</span> <span class="toc-text">instance_evalæ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E7%A0%B4%E5%B0%81%E8%A3%85"><span class="toc-number">4.4.1.</span> <span class="toc-text">æ‰“ç ´å°è£…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B4%81%E5%87%80%E5%AE%A4"><span class="toc-number">4.4.2.</span> <span class="toc-text">æ´å‡€å®¤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E8%B0%83%E7%94%A8%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.5.</span> <span class="toc-text">å¯è°ƒç”¨å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Proc%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.5.1.</span> <span class="toc-text">Procå¯¹è±¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Proc%E4%B8%8ELambda%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">4.5.2.</span> <span class="toc-text">Procä¸Lambdaçš„å¯¹æ¯”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Method%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.5.3.</span> <span class="toc-text">Methodå¯¹è±¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E8%B0%83%E7%94%A8%E5%AF%B9%E8%B1%A1%E5%B0%8F%E7%BB%93"><span class="toc-number">4.5.4.</span> <span class="toc-text">å¯è°ƒç”¨å¯¹è±¡å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E9%A2%86%E5%9F%9F%E4%B8%93%E5%B1%9E%E8%AF%AD%E8%A8%80-DSL"><span class="toc-number">4.6.</span> <span class="toc-text">ç¼–å†™é¢†åŸŸä¸“å±è¯­è¨€(DSL)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A2%86%E5%9F%9F%E4%B8%93%E5%B1%9E%E8%AF%AD%E8%A8%80"><span class="toc-number">4.6.1.</span> <span class="toc-text">ç¬¬ä¸€ä¸ªé¢†åŸŸä¸“å±è¯­è¨€</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%B9%E8%89%AF%E7%9A%84DSL"><span class="toc-number">4.7.</span> <span class="toc-text">æ”¹è‰¯çš„DSL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-1"><span class="toc-number">4.8.</span> <span class="toc-text">å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B1%BB%E5%AE%9A%E4%B9%89"><span class="toc-number">5.</span> <span class="toc-text">ç±»å®šä¹‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%AD%E7%A7%98%E7%B1%BB%E5%AE%9A%E4%B9%89"><span class="toc-number">5.1.</span> <span class="toc-text">æ­ç§˜ç±»å®šä¹‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E7%B1%BB%E5%AE%9A%E4%B9%89"><span class="toc-number">5.1.1.</span> <span class="toc-text">æ·±å…¥ç±»å®šä¹‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%93%E5%89%8D%E7%B1%BB"><span class="toc-number">5.1.2.</span> <span class="toc-text">å½“å‰ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F"><span class="toc-number">5.1.3.</span> <span class="toc-text">ç±»å®ä¾‹å˜é‡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Taboo%E7%B1%BB"><span class="toc-number">5.2.</span> <span class="toc-text">Tabooç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E4%BB%B6%E6%96%B9%E6%B3%95"><span class="toc-number">5.3.</span> <span class="toc-text">å•ä»¶æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8D%95%E4%BB%B6%E6%96%B9%E6%B3%95"><span class="toc-number">5.3.1.</span> <span class="toc-text">ä½¿ç”¨å•ä»¶æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E6%96%B9%E6%B3%95%E7%9A%84%E7%9C%9F%E7%9B%B8"><span class="toc-number">5.3.2.</span> <span class="toc-text">ç±»æ–¹æ³•çš„çœŸç›¸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%AE%8F"><span class="toc-number">5.3.3.</span> <span class="toc-text">ç±»å®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E4%BB%B6%E7%B1%BB"><span class="toc-number">5.4.</span> <span class="toc-text">å•ä»¶ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%BB%B6%E6%96%B9%E6%B3%95%E7%9A%84%E7%A5%9E%E5%A5%87%E4%B9%8B%E5%A4%84"><span class="toc-number">5.4.1.</span> <span class="toc-text">å•ä»¶æ–¹æ³•çš„ç¥å¥‡ä¹‹å¤„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%AD%E7%A7%98%E5%8D%95%E4%BB%B6%E7%B1%BB"><span class="toc-number">5.4.2.</span> <span class="toc-text">æ­ç§˜å•ä»¶ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE"><span class="toc-number">5.4.3.</span> <span class="toc-text">è¡¥å……æ–¹æ³•æŸ¥æ‰¾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E7%9A%84%E9%BA%BB%E7%83%A6"><span class="toc-number">5.5.</span> <span class="toc-text">æ¨¡å—çš„éº»çƒ¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%8C%85%E8%A3%85%E5%99%A8"><span class="toc-number">5.6.</span> <span class="toc-text">æ–¹æ³•åŒ…è£…å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%88%AB%E5%90%8D"><span class="toc-number">5.6.1.</span> <span class="toc-text">æ–¹æ³•åˆ«å</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E5%A4%9A%E7%9A%84%E6%96%B9%E6%B3%95%E5%8C%85%E8%A3%85%E5%99%A8"><span class="toc-number">5.6.2.</span> <span class="toc-text">æ›´å¤šçš„æ–¹æ³•åŒ…è£…å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3Amazon%E9%9A%BE%E9%A2%98"><span class="toc-number">5.6.3.</span> <span class="toc-text">è§£å†³Amazonéš¾é¢˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E7%A0%B4%E6%95%B0%E5%AD%A6%E8%A7%84%E5%BE%8B"><span class="toc-number">5.7.</span> <span class="toc-text">æ‰“ç ´æ•°å­¦è§„å¾‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-2"><span class="toc-number">5.8.</span> <span class="toc-text">å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">6.</span> <span class="toc-text">ç¼–å†™ä»£ç çš„ä»£ç </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E5%90%91%E5%91%A8%E6%9C%AB%E7%9A%84%E7%BC%96%E7%A8%8B%E4%B9%8B%E8%B7%AF"><span class="toc-number">6.1.</span> <span class="toc-text">é€šå‘å‘¨æœ«çš„ç¼–ç¨‹ä¹‹è·¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%80%81%E6%9D%BF%E7%9A%84%E4%BB%BB%E5%8A%A1"><span class="toc-number">6.1.1.</span> <span class="toc-text">è€æ¿çš„ä»»åŠ¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E8%AE%A1%E5%88%92"><span class="toc-number">6.1.2.</span> <span class="toc-text">å¼€å‘è®¡åˆ’</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Kernel-eval%E6%96%B9%E6%B3%95"><span class="toc-number">6.2.</span> <span class="toc-text">Kernel#evalæ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#REST-Client%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="toc-number">6.2.1.</span> <span class="toc-text">REST Clientçš„ä¾‹å­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.2.2.</span> <span class="toc-text">ç»‘å®šå¯¹è±¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#irb%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="toc-number">6.2.3.</span> <span class="toc-text">irbçš„ä¾‹å­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94%E4%BB%A3%E7%A0%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E5%9D%97"><span class="toc-number">6.2.4.</span> <span class="toc-text">å¯¹æ¯”ä»£ç å­—ç¬¦ä¸²ä¸å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#eval%E6%96%B9%E6%B3%95%E7%9A%84%E9%BA%BB%E7%83%A6"><span class="toc-number">6.2.5.</span> <span class="toc-text">evalæ–¹æ³•çš„éº»çƒ¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%A1%E9%AA%8C%E8%BF%87%E7%9A%84%E5%B1%9E%E6%80%A7-%E7%AC%AC%E4%B8%80%E6%AD%A5"><span class="toc-number">6.3.</span> <span class="toc-text">æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬ä¸€æ­¥)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%A1%E9%AA%8C%E8%BF%87%E7%9A%84%E5%B1%9E%E6%80%A7-%E7%AC%AC%E4%BA%8C%E6%AD%A5"><span class="toc-number">6.4.</span> <span class="toc-text">æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬äºŒæ­¥)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%A1%E9%AA%8C%E8%BF%87%E7%9A%84%E5%B1%9E%E6%80%A7-%E7%AC%AC%E4%B8%89%E6%AD%A5"><span class="toc-number">6.5.</span> <span class="toc-text">æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬ä¸‰æ­¥)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%A1%E9%AA%8C%E8%BF%87%E7%9A%84%E5%B1%9E%E6%80%A7-%E7%AC%AC%E5%9B%9B%E6%AD%A5"><span class="toc-number">6.6.</span> <span class="toc-text">æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬å››æ­¥)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%92%A9%E5%AD%90%E6%96%B9%E6%B3%95"><span class="toc-number">6.7.</span> <span class="toc-text">é’©å­æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E5%A4%9A%E9%92%A9%E5%AD%90%E6%96%B9%E6%B3%95"><span class="toc-number">6.7.1.</span> <span class="toc-text">æ›´å¤šé’©å­æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VCR%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="toc-number">6.7.2.</span> <span class="toc-text">VCRçš„ä¾‹å­</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%A1%E9%AA%8C%E8%BF%87%E7%9A%84%E5%B1%9E%E6%80%A7-%E7%AC%AC%E4%BA%94%E6%AD%A5"><span class="toc-number">6.8.</span> <span class="toc-text">æ ¡éªŒè¿‡çš„å±æ€§(ç¬¬äº”æ­¥)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-3"><span class="toc-number">6.9.</span> <span class="toc-text">å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%BE%E5%A3%B0"><span class="toc-number">7.</span> <span class="toc-text">å°¾å£°</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%86%E5%A4%87Rails%E4%B9%8B%E6%97%85"><span class="toc-number">8.</span> <span class="toc-text">å‡†å¤‡Railsä¹‹æ—…</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Active-Record%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">9.</span> <span class="toc-text">Active Recordçš„è®¾è®¡</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Active-Support%E7%9A%84Concern%E6%A8%A1%E5%9D%97"><span class="toc-number">10.</span> <span class="toc-text">Active Supportçš„Concernæ¨¡å—</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#alias-method-chain%E6%96%B9%E6%B3%95%E6%B2%89%E6%B5%AE%E8%A1%A8"><span class="toc-number">11.</span> <span class="toc-text">alias_method_chainæ–¹æ³•æ²‰æµ®è¡¨</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E6%96%B9%E6%B3%95%E7%9A%84%E5%8F%91%E5%B1%95"><span class="toc-number">12.</span> <span class="toc-text">å±æ€§æ–¹æ³•çš„å‘å±•</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%80%E5%90%8E%E7%9A%84%E6%80%9D%E8%80%83"><span class="toc-number">13.</span> <span class="toc-text">æœ€åçš„æ€è€ƒ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95%EF%BC%88%E6%80%9D%E8%80%83%EF%BC%89"><span class="toc-number">14.</span> <span class="toc-text">é™„å½•ï¼ˆæ€è€ƒï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#include-amp-extend%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">14.1.</span> <span class="toc-text">include&amp;extendçš„ä½¿ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1-amp-%E5%8A%A8%E6%80%81%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">14.2.</span> <span class="toc-text">åŠ¨æ€åˆ›å»ºå¯¹è±¡&amp;åŠ¨æ€è°ƒç”¨æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC"><span class="toc-number">14.3.</span> <span class="toc-text">åŠ¨æ€æ‰§è¡Œè„šæœ¬</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Longbiu</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a><br>
<img src="/img/icp.png">
<a href="https://beian.miit.gov.cn/"  style="color:#eee" target="_blank">æ¹˜ICPå¤‡19004050å·</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç°¡</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: 'bbbefc150f2ac41c4086',
      clientSecret: '6826921d2b13feefef509569b8394bf68081782c',
      repo: 'mygitalk',
      owner: 'stanedward1',
      admin: ['stanedward1'],
      id: '91cbb71575bcc989e8dc73d0693ab122',
      language: 'zh-CN',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: false,
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><div class="aplayer no-destroy" data-id="000PeZCQ1i4XVs" data-server="tencent" data-type="artist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener toc scroll 
  window.removeEventListener('scroll', window.tocScrollFn)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>